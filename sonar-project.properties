# ============================================================================
# SonarQube Configuration - Ensurance & Pharmacy Frontends (Community Edition)
# ============================================================================
# Configuración para análisis de múltiples proyectos frontend (Community Edition)
# Análisis de ensurance y pharmacy con exclusión completa de tests
# ============================================================================

# --- Identidad del proyecto ---
sonar.projectKey=ensurance-pharmacy
sonar.projectName=Ensurance Pharmacy System
sonar.sourceEncoding=UTF-8

# --- Rutas a analizar (código de producción) ---
# Ambos frontends
sonar.sources=ensurance/src,pharmacy/src

# --- Rutas de tests ---
# Tests de ambos frontends
sonar.tests=ensurance/tests,pharmacy/tests

# Patrones de archivos de test para JS/TS/Vue
sonar.test.inclusions=**/__tests__/**,**/*.test.*,**/*.spec.*,**/tests/**

# --- Exclusiones de código fuente ---
sonar.exclusions=**/build/**,**/target/**,**/node_modules/**,**/dist/**,**/coverage/**,**/*.min.js,**/databases/**,**/logs/**

# --- Exclusiones de coverage (COMPLETAS Y EXPLÍCITAS) ---
# Excluir TODOS los archivos y directorios de test del análisis de cobertura
sonar.coverage.exclusions=\
**/__tests__/**,\
**/*.test.*,\
**/*.spec.*,\
**/tests/**,\
**/coverage/**,\
**/appointments.spec.ts,\
**/PortSelector.spec.ts,\
**/profile-completion.spec.ts,\
**/src/pages/__tests__/**,\
**/src/components/__tests__/**,\
**/ensurance/src/pages/__tests__/appointments.spec.ts,\
**/ensurance/src/components/__tests__/PortSelector.spec.ts,\
**/ensurance/src/pages/__tests__/profile-completion.spec.ts,\
**/pharmacy/src/pages/__tests__/**,\
**/pharmacy/src/components/__tests__/**,\
**/backv4/src/test/**,\
**/backv5/src/test/**,\
**/backv4/target/**,\
**/backv5/target/**,\
**/node_modules/**,\
**/dist/**,\
**/build/**,\
**/coverage/**

# --- Configuración JavaScript/TypeScript ---
sonar.javascript.lcov.reportPaths=ensurance/coverage/lcov.info,pharmacy/coverage/lcov.info

# --- Configuración por ambiente ---
# Estas propiedades se pueden sobrescribir desde Jenkins por rama
sonar.branch.name=${BRANCH_NAME}
sonar.projectVersion=${BUILD_NUMBER}

# --- Configuración de calidad ---
sonar.qualitygate.wait=true
sonar.qualitygate.timeout=300
