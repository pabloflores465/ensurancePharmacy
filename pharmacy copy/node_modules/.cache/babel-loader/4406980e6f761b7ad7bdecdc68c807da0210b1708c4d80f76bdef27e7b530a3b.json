{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"prescriptions-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"mb-4 text-red-600 text-center\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"prescriptions-list\"\n};\nconst _hoisted_4 = {\n  class: \"text-xl font-bold\"\n};\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  key: 1\n};\nconst _hoisted_7 = {\n  key: 2,\n  class: \"medicine-table\"\n};\nconst _hoisted_8 = {\n  key: 3,\n  class: \"insurance-info\"\n};\nconst _hoisted_9 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[6] || (_cache[6] = _createElementVNode(\"h2\", {\n    class: \"text-2xl font-bold text-center text-blue-800 mb-4\"\n  }, \" Todas las Recetas \", -1 /* HOISTED */)), _createCommentVNode(\" Mensaje de error si lo hay \"), $setup.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString($setup.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Lista de recetas \"), $setup.recipes && $setup.recipes.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.recipes, recipe => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: recipe._id,\n      class: \"prescription-item\"\n    }, [_createElementVNode(\"h3\", _hoisted_4, _toDisplayString(recipe.patient && recipe.patient.username), 1 /* TEXT */), recipe.patient && recipe.patient.email ? (_openBlock(), _createElementBlock(\"p\", _hoisted_5, [_cache[0] || (_cache[0] = _createElementVNode(\"strong\", null, \"Email:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(recipe.patient.email), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"p\", null, [_cache[1] || (_cache[1] = _createElementVNode(\"strong\", null, \"ID Receta:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(recipe._id), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"strong\", null, \"Diagnóstico:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(recipe.diagnostic || 'No especificado'), 1 /* TEXT */)]), recipe.created_at ? (_openBlock(), _createElementBlock(\"p\", _hoisted_6, [_cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"Fecha:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(recipe.created_at), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Tabla de Medicinas \"), recipe.medicines && recipe.medicines.length > 0 ? (_openBlock(), _createElementBlock(\"table\", _hoisted_7, [_cache[4] || (_cache[4] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Nombre\"), _createElementVNode(\"th\", null, \"Concentración\"), _createElementVNode(\"th\", null, \"Presentación\"), _createElementVNode(\"th\", null, \"Dosis\"), _createElementVNode(\"th\", null, \"Frecuencia\"), _createElementVNode(\"th\", null, \"Duración\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(recipe.medicines, medicine => {\n      return _openBlock(), _createElementBlock(\"tr\", {\n        key: medicine._id\n      }, [_createElementVNode(\"td\", null, _toDisplayString(medicine.principioActivo), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(medicine.concentracion), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(medicine.presentacion), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(medicine.dosis), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(medicine.frecuencia), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(medicine.duracion), 1 /* TEXT */)]);\n    }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true), recipe.has_insurance ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, \"Con seguro médico\")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"button\", {\n      class: \"buy-button\",\n      onClick: $event => _ctx.$router.push({\n        name: 'PrescriptionPay',\n        params: {\n          id: recipe._id\n        }\n      })\n    }, \"Comprar\", 8 /* PROPS */, _hoisted_9)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_createCommentVNode(\" Mensaje si no hay recetas \"), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"text-center text-gray-600\"\n  }, \" No hay recetas disponibles. \", -1 /* HOISTED */))], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","$setup","errorMessage","_hoisted_2","_toDisplayString","recipes","length","_hoisted_3","_Fragment","_renderList","recipe","_id","_hoisted_4","patient","username","email","_hoisted_5","_createTextVNode","diagnostic","created_at","_hoisted_6","medicines","_hoisted_7","medicine","principioActivo","concentracion","presentacion","dosis","frecuencia","duracion","has_insurance","_hoisted_8","onClick","$event","_ctx","$router","push","name","params","id","_hoisted_9"],"sources":["/Users/nohelestradap/Documents/VsCode/ensurancePharmacy/pharmacy/src/pages/Prescriptions.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"prescriptions-container\">\n    <h2 class=\"text-2xl font-bold text-center text-blue-800 mb-4\">\n      Todas las Recetas\n    </h2>\n\n    <!-- Mensaje de error si lo hay -->\n    <div v-if=\"errorMessage\" class=\"mb-4 text-red-600 text-center\">\n      {{ errorMessage }}\n    </div>\n    <!-- Lista de recetas -->\n    <div v-if=\"recipes && recipes.length > 0\" class=\"prescriptions-list\">\n      <div v-for=\"recipe in recipes\" :key=\"recipe._id\" class=\"prescription-item\">\n        <h3 class=\"text-xl font-bold\">{{ recipe.patient && recipe.patient.username }}</h3>\n        <p v-if=\"recipe.patient && recipe.patient.email\"><strong>Email:</strong> {{ recipe.patient.email }}</p>\n        <p><strong>ID Receta:</strong> {{ recipe._id }}</p>\n        <p><strong>Diagnóstico:</strong> {{ recipe.diagnostic || 'No especificado' }}</p>\n        <p v-if=\"recipe.created_at\"><strong>Fecha:</strong> {{ recipe.created_at }}</p>\n\n        <!-- Tabla de Medicinas -->\n        <table class=\"medicine-table\" v-if=\"recipe.medicines && recipe.medicines.length > 0\">\n          <thead>\n          <tr>\n            <th>Nombre</th>\n            <th>Concentración</th>\n            <th>Presentación</th>\n            <th>Dosis</th>\n            <th>Frecuencia</th>\n            <th>Duración</th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr v-for=\"medicine in recipe.medicines\" :key=\"medicine._id\">\n            <td>{{ medicine.principioActivo }}</td>\n            <td>{{ medicine.concentracion }}</td>\n            <td>{{ medicine.presentacion }}</td>\n            <td>{{ medicine.dosis }}</td>\n            <td>{{ medicine.frecuencia }}</td>\n            <td>{{ medicine.duracion }}</td>\n          </tr>\n          </tbody>\n        </table>\n        <p v-if=\"recipe.has_insurance\" class=\"insurance-info\">Con seguro médico</p>\n        <button class=\"buy-button\" @click=\"$router.push({ name: 'PrescriptionPay', params: { id: recipe._id } })\">Comprar</button>\n      </div>\n    </div>\n\n    <!-- Mensaje si no hay recetas -->\n    <div v-else class=\"text-center text-gray-600\">\n      No hay recetas disponibles.\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport axios from 'axios';\n\nconst recipes = ref([]);\nconst errorMessage = ref('');\n\nconst fetchPrescriptions = async () => {\n  try {\n    // Obtener el nombre de usuario (mel) del localStorage\n    let username = 'mel'; // Valor por defecto\n    try {\n      const userData = JSON.parse(localStorage.getItem('user'));\n      if (userData && userData.name) {\n        username = userData.name; // Tomar el valor \"mel\" del campo name\n        console.log(\"Nombre de usuario obtenido:\", username);\n      } else {\n        // Intentar obtener desde session\n        const sessionData = JSON.parse(localStorage.getItem('session'));\n        if (sessionData && sessionData.name) {\n          username = sessionData.name;\n          console.log(\"Nombre de usuario obtenido de session:\", username);\n        } else {\n          console.warn(\"No se encontró el nombre de usuario en localStorage\");\n        }\n      }\n    } catch (err) {\n      console.error(\"Error al obtener el usuario del localStorage:\", err);\n    }\n\n    // Consumir el API con el parámetro username (mel)\n    console.log(`Consultando recetas para el usuario: ${username}`);\n    const response = await axios.get(`${import.meta.env.VITE_API_URL}/recipes?username=${username}`);\n    \n    if (response.data && response.data.recipes) {\n      recipes.value = response.data.recipes;\n      console.log(\"RECETAS OBTENIDAS:\", recipes.value);\n    } else {\n      console.warn(\"La respuesta del API no tiene el formato esperado\", response.data);\n      recipes.value = [];\n      errorMessage.value = 'No se encontraron recetas para este usuario.';\n    }\n  } catch (error) {\n    console.error(\"Error al obtener las recetas:\", error);\n    recipes.value = [];\n    errorMessage.value = 'Error al obtener las recetas. Por favor, inténtelo de nuevo.';\n  }\n};\n\nonMounted(() => {\n  fetchPrescriptions();\n});\n</script>\n\n<style scoped>\n.prescriptions-container {\n  padding: 50px;\n  background-color: #f8f9fa;\n}\n\n.prescriptions-list {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.prescription-item {\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n}\n\n.medicine-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 10px;\n  margin-bottom: 15px;\n}\n\n.medicine-table th, .medicine-table td {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: center;\n}\n\n.medicine-table th {\n  background-color: #f4f4f4;\n  font-weight: bold;\n}\n\n.insurance-info {\n  color: #4caf50;\n  font-weight: bold;\n  margin: 10px 0;\n}\n\n.buy-button {\n  background-color: #4caf50;\n  color: white;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  border: none;\n  font-weight: bold;\n}\n\n.buy-button:hover {\n  background-color: #45a049;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}