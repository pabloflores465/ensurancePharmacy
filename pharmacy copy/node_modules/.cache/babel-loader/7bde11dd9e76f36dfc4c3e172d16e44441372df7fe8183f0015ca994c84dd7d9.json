{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport axios from 'axios';\nexport default {\n  __name: 'PrescriptionPay',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const prescription = ref(null);\n    const errorMessage = ref('');\n    const ip = process.env.VUE_APP_API_IP || 'localhost';\n    const fetchPrescription = async () => {\n      try {\n        const prescriptionId = route.params.id;\n        // Fetch all prescription medicines as in Prescriptions.vue\n        const response = await axios.get(`http://${ip}:8081/api2/prescription_medicines`);\n        const allData = response.data;\n        // Filtrar solo las recetas que coinciden con el id de la receta\n        const filtered = allData.filter(p => p.id.prescriptionId == prescriptionId);\n        if (filtered.length > 0) {\n          // Agrupar los datos por prescriptionId para consolidar las medicinas\n          const grouped = {};\n          filtered.forEach(p => {\n            const prescId = p.id.prescriptionId;\n            if (!grouped[prescId]) {\n              grouped[prescId] = {\n                ...p,\n                // Copy all properties of p (including idPrescription, approved, hospital, user, etc.)\n                medicines: []\n              };\n            }\n            grouped[prescId].medicines.push({\n              ...p.medicine,\n              dosis: p.dosis,\n              frecuencia: p.frecuencia,\n              duracion: p.duracion\n            });\n          });\n          prescription.value = grouped[prescriptionId];\n          console.log(prescription.value);\n        } else {\n          errorMessage.value = 'No se encontró la receta.';\n        }\n      } catch (error) {\n        console.error('Error al obtener la receta:', error);\n        errorMessage.value = 'Error al obtener la receta. Por favor, inténtelo de nuevo.';\n      }\n    };\n    onMounted(() => {\n      fetchPrescription();\n    });\n    const __returned__ = {\n      route,\n      prescription,\n      errorMessage,\n      ip,\n      fetchPrescription,\n      ref,\n      onMounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRoute","axios","route","prescription","errorMessage","ip","process","env","VUE_APP_API_IP","fetchPrescription","prescriptionId","params","id","response","get","allData","data","filtered","filter","p","length","grouped","forEach","prescId","medicines","push","medicine","dosis","frecuencia","duracion","value","console","log","error"],"sources":["/Users/nohelestradap/Documents/VsCode/ensurancePharmacy/pharmacy/src/pages/PrescriptionPay.vue"],"sourcesContent":["<template>\n  <div class=\"prescription-pay-container\">\n    <h2 class=\"text-2xl font-bold text-center text-blue-800 mb-4\">Detalle de la Receta</h2>\n\n    <!-- Mensaje de error si lo hay -->\n    <div v-if=\"errorMessage\" class=\"mb-4 text-red-600 text-center\">\n      {{ errorMessage }}\n    </div>\n\n    <!-- Mostrar la receta cuando se cargue -->\n    <div v-if=\"prescription\">\n      <p><strong>ID Receta:</strong> {{ prescription.idPrescription }}</p>\n      <p><strong>Diagnóstico:</strong> {{ prescription.diagnosis || 'No especificado' }}</p>\n      <p><strong>Fecha:</strong> {{ prescription.date || 'No disponible' }}</p>\n\n      <!-- Tabla de Medicinas si existen -->\n      <div v-if=\"prescription.medicines && prescription.medicines.length > 0\">\n        <table class=\"medicine-table\">\n          <thead>\n            <tr>\n              <th>Nombre</th>\n              <th>Concentración</th>\n              <th>Presentación</th>\n              <th>Dosis</th>\n              <th>Frecuencia</th>\n              <th>Duración</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"medicine in prescription.medicines\" :key=\"medicine.idMedicine\">\n              <td>{{ medicine.name }}</td>\n              <td>{{ medicine.concentration }}</td>\n              <td>{{ medicine.presentacion }}</td>\n              <td>{{ medicine.dosis }}</td>\n              <td>{{ medicine.frecuencia }}</td>\n              <td>{{ medicine.duracion }} días</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div v-else>\n      <p>Cargando receta...</p>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport axios from 'axios';\n\nconst route = useRoute();\nconst prescription = ref(null);\nconst errorMessage = ref('');\nconst ip = process.env.VUE_APP_API_IP || 'localhost';\n\nconst fetchPrescription = async () => {\n  try {\n    const prescriptionId = route.params.id;\n    // Fetch all prescription medicines as in Prescriptions.vue\n    const response = await axios.get(`http://${ip}:8081/api2/prescription_medicines`);\n    const allData = response.data;\n    // Filtrar solo las recetas que coinciden con el id de la receta\n    const filtered = allData.filter(p => p.id.prescriptionId == prescriptionId);\n\n    if (filtered.length > 0) {\n      // Agrupar los datos por prescriptionId para consolidar las medicinas\n      const grouped = {};\n      filtered.forEach(p => {\n        const prescId = p.id.prescriptionId;\n        if (!grouped[prescId]) {\n          grouped[prescId] = {\n            ...p, // Copy all properties of p (including idPrescription, approved, hospital, user, etc.)\n            medicines: []\n          };\n        }\n        grouped[prescId].medicines.push({\n          ...p.medicine,\n          dosis: p.dosis,\n          frecuencia: p.frecuencia,\n          duracion: p.duracion\n        });\n      });\n      prescription.value = grouped[prescriptionId];\n      console.log(prescription.value)\n    } else {\n      errorMessage.value = 'No se encontró la receta.';\n    }\n  } catch (error) {\n    console.error('Error al obtener la receta:', error);\n    errorMessage.value = 'Error al obtener la receta. Por favor, inténtelo de nuevo.';\n  }\n};\n\nonMounted(() => {\n  fetchPrescription();\n});\n</script>\n\n<style scoped>\n.prescription-pay-container {\n  padding: 50px;\n  background-color: #f8f9fa;\n}\n\n.medicine-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 10px;\n}\n\n.medicine-table th, .medicine-table td {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: center;\n}\n\n.medicine-table th {\n  background-color: #f4f4f4;\n  font-weight: bold;\n}\n</style>\n"],"mappings":";;;;AAgDA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,QAAQ,QAAQ,YAAY;AACrC,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,KAAK,GAAGF,QAAQ,CAAC,CAAC;IACxB,MAAMG,YAAY,GAAGL,GAAG,CAAC,IAAI,CAAC;IAC9B,MAAMM,YAAY,GAAGN,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMO,EAAE,GAAGC,OAAO,CAACC,GAAG,CAACC,cAAc,IAAI,WAAW;IAEpD,MAAMC,iBAAiB,GAAG,MAAAA,CAAA,KAAY;MACpC,IAAI;QACF,MAAMC,cAAc,GAAGR,KAAK,CAACS,MAAM,CAACC,EAAE;QACtC;QACA,MAAMC,QAAQ,GAAG,MAAMZ,KAAK,CAACa,GAAG,CAAC,UAAUT,EAAE,mCAAmC,CAAC;QACjF,MAAMU,OAAO,GAAGF,QAAQ,CAACG,IAAI;QAC7B;QACA,MAAMC,QAAQ,GAAGF,OAAO,CAACG,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACP,EAAE,CAACF,cAAc,IAAIA,cAAc,CAAC;QAE3E,IAAIO,QAAQ,CAACG,MAAM,GAAG,CAAC,EAAE;UACvB;UACA,MAAMC,OAAO,GAAG,CAAC,CAAC;UAClBJ,QAAQ,CAACK,OAAO,CAACH,CAAC,IAAI;YACpB,MAAMI,OAAO,GAAGJ,CAAC,CAACP,EAAE,CAACF,cAAc;YACnC,IAAI,CAACW,OAAO,CAACE,OAAO,CAAC,EAAE;cACrBF,OAAO,CAACE,OAAO,CAAC,GAAG;gBACjB,GAAGJ,CAAC;gBAAE;gBACNK,SAAS,EAAE;cACb,CAAC;YACH;YACAH,OAAO,CAACE,OAAO,CAAC,CAACC,SAAS,CAACC,IAAI,CAAC;cAC9B,GAAGN,CAAC,CAACO,QAAQ;cACbC,KAAK,EAAER,CAAC,CAACQ,KAAK;cACdC,UAAU,EAAET,CAAC,CAACS,UAAU;cACxBC,QAAQ,EAAEV,CAAC,CAACU;YACd,CAAC,CAAC;UACJ,CAAC,CAAC;UACF1B,YAAY,CAAC2B,KAAK,GAAGT,OAAO,CAACX,cAAc,CAAC;UAC5CqB,OAAO,CAACC,GAAG,CAAC7B,YAAY,CAAC2B,KAAK;QAChC,CAAC,MAAM;UACL1B,YAAY,CAAC0B,KAAK,GAAG,2BAA2B;QAClD;MACF,CAAC,CAAC,OAAOG,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;QACnD7B,YAAY,CAAC0B,KAAK,GAAG,4DAA4D;MACnF;IACF,CAAC;IAED/B,SAAS,CAAC,MAAM;MACdU,iBAAiB,CAAC,CAAC;IACrB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}