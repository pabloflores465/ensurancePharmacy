{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { useUserStore } from '@/stores/userStore';\n\n// Asegúrate de tener definida la variable de entorno (p. ej., VUE_APP_IP)\n\nexport default {\n  __name: 'Login',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const ip = process.env.VUE_APP_IP;\n    console.log(\"IP del servidor: \" + ip);\n    const router = useRouter();\n\n    // Campos reactivamente enlazados al formulario\n    const email = ref('');\n    const password = ref('');\n    const errorMessage = ref('');\n    const showModal = ref(false);\n    const userType = ref('');\n\n    // Función principal de login\n    const login = async () => {\n      errorMessage.value = '';\n      try {\n        // Petición POST al backend (ajusta la URL a la tuya)\n        const response = await axios.post(`http://${ip}:8081/api2/login`, {\n          email: email.value,\n          password: password.value\n        });\n\n        // Supongamos que tu backend responde algo como:\n        // {\n        //   \"Object\": {\n        //       \"idUser\": 3,\n        //       \"name\": \"Rodrigo\",\n        //       \"role\": \"admin\",\n        //       ...\n        //   }\n        // }\n        // Ajusta a cómo venga tu data\n        console.log(\"Login exitoso:\", response.data);\n        useUserStore().setUser(response.data);\n        // Si la respuesta es exitosa, redirige al inicio o a la ruta deseada\n\n        router.push('/');\n      } catch (error) {\n        console.error(\"Error en el login:\", error);\n        errorMessage.value = 'Credenciales incorrectas o error en el servidor.';\n      }\n    };\n    const __returned__ = {\n      ip,\n      router,\n      email,\n      password,\n      errorMessage,\n      showModal,\n      userType,\n      login,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      },\n      get useUserStore() {\n        return useUserStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRouter","axios","useUserStore","ip","process","env","VUE_APP_IP","console","log","router","email","password","errorMessage","showModal","userType","login","value","response","post","data","setUser","push","error"],"sources":["/Users/nohelestradap/Documents/VsCode/ensurancePharmacy/pharmacy/src/pages/Login.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"login-container\">\n    <div class=\"login-image\"></div>\n\n    <div class=\"login-box\">\n      <div class=\"logo-container\">\n        <img src=\"@/assets/logo.png\" alt=\"Farmacia Logo\" class=\"logo\" />\n      </div>\n\n      <h2 class=\"text-2xl font-bold text-center text-blue-800 mb-4\">\n        Iniciar Sesión\n      </h2>\n\n      <!-- Mensaje de error si lo hay -->\n      <div v-if=\"errorMessage\" class=\"mb-4 text-red-600 text-center\">\n        {{ errorMessage }}\n      </div>\n\n      <!-- Formulario -->\n      <form @submit.prevent=\"login\">\n        <!-- E-mail -->\n        <div class=\"mb-4\">\n          <label class=\"block text-gray-700\">E-mail</label>\n          <div class=\"input-group\">\n            <input\n              v-model=\"email\"\n              type=\"text\"\n              class=\"input-field\"\n              required\n            />\n            <span class=\"icon\">👤</span>\n          </div>\n        </div>\n        \n        <!-- Contraseña -->\n        <div class=\"mb-4\">\n          <label class=\"block text-gray-700\">Contraseña</label>\n          <div class=\"input-group\">\n            <input\n              v-model=\"password\"\n              type=\"password\"\n              class=\"input-field\"\n              required\n            />\n            <span class=\"icon\">🔒</span>\n          </div>\n        </div>\n\n        <!-- Botón de inicio de sesión -->\n        <button type=\"submit\" @click=\"()=>login()\" class=\"login-button\">\n          Iniciar sesión →\n        </button>\n      </form>\n\n      <!-- Enlace para registrarse -->\n      <div class=\"text-center mt-4\">\n        <router-link to=\"/register\" class=\"text-blue-500 hover:underline\">\n          Regístrarse aquí\n        </router-link>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal para mostrar el tipo de usuario -->\n  <div v-if=\"showModal\" class=\"modal\">\n    <div class=\"modal-content\">\n      <span class=\"close\" @click=\"showModal = false\">&times;</span>\n      <p>Tipo de usuario: {{ userType }}</p>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { useUserStore } from '@/stores/userStore'\n\n// Asegúrate de tener definida la variable de entorno (p. ej., VUE_APP_IP)\nconst ip = process.env.VUE_APP_IP;\nconsole.log(\"IP del servidor: \" + ip);\n\nconst router = useRouter();\n\n// Campos reactivamente enlazados al formulario\nconst email = ref('');\nconst password = ref('');\nconst errorMessage = ref('');\nconst showModal = ref(false);\nconst userType = ref('');\n\n// Función principal de login\nconst login = async () => {\n  errorMessage.value = '';\n  \n  try {\n    // Petición POST al backend (ajusta la URL a la tuya)\n    const response = await axios.post(`http://${ip}:8081/api2/login`, {\n      email: email.value,\n      password: password.value\n    });\n    \n    // Supongamos que tu backend responde algo como:\n    // {\n    //   \"Object\": {\n    //       \"idUser\": 3,\n    //       \"name\": \"Rodrigo\",\n    //       \"role\": \"admin\",\n    //       ...\n    //   }\n    // }\n    // Ajusta a cómo venga tu data\n    console.log(\"Login exitoso:\", response.data);\n    useUserStore().setUser(response.data)\n    // Si la respuesta es exitosa, redirige al inicio o a la ruta deseada\n    \n    router.push('/');\n  } catch (error) {\n    console.error(\"Error en el login:\", error);\n    errorMessage.value = 'Credenciales incorrectas o error en el servidor.';\n  }\n};\n</script>\n\n<style scoped>\n/* Ejemplo de estilos, ajusta a tu gusto. */\n.login-container {\n  display: flex;\n  height: 100vh;\n  background-color: #f8f9fa;\n}\n.login-image {\n  flex: 1;\n  background-image: url(@/assets/farmacialog.jpg);\n  background-position: center;\n  background-size: cover;\n}\n.login-box {\n  flex: 1;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 50px;\n}\n.logo {\n  max-width: 150px;\n}\n.input-group {\n  position: relative;\n  width: 100%;\n}\n.input-field {\n  width: 100%;\n  padding: 12px 40px 12px 12px;\n  border: 1px solid #ccc;\n  border-radius: 8px;\n  font-size: 16px;\n}\n.icon {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n}\n.login-button {\n  width: 100%;\n  background: #1e40af;\n  color: white;\n  padding: 12px;\n  border-radius: 8px;\n  font-size: 18px;\n  font-weight: bold;\n  cursor: pointer;\n  margin-top: 1rem;\n}\n.login-button:hover {\n  background: #1e3a8a;\n}\n\n.modal {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  z-index: 1;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.modal-content {\n  background-color: white;\n  padding: 20px;\n  border-radius: 8px;\n  text-align: center;\n}\n\n.close {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  font-size: 24px;\n  cursor: pointer;\n}\n</style>"],"mappings":";AA0EA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,QAAQ,oBAAmB;;AAEhD;;;;;;;;IACA,MAAMC,EAAE,GAAGC,OAAO,CAACC,GAAG,CAACC,UAAU;IACjCC,OAAO,CAACC,GAAG,CAAC,mBAAmB,GAAGL,EAAE,CAAC;IAErC,MAAMM,MAAM,GAAGT,SAAS,CAAC,CAAC;;IAE1B;IACA,MAAMU,KAAK,GAAGX,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMY,QAAQ,GAAGZ,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMa,YAAY,GAAGb,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMc,SAAS,GAAGd,GAAG,CAAC,KAAK,CAAC;IAC5B,MAAMe,QAAQ,GAAGf,GAAG,CAAC,EAAE,CAAC;;IAExB;IACA,MAAMgB,KAAK,GAAG,MAAAA,CAAA,KAAY;MACxBH,YAAY,CAACI,KAAK,GAAG,EAAE;MAEvB,IAAI;QACF;QACA,MAAMC,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,IAAI,CAAC,UAAUf,EAAE,kBAAkB,EAAE;UAChEO,KAAK,EAAEA,KAAK,CAACM,KAAK;UAClBL,QAAQ,EAAEA,QAAQ,CAACK;QACrB,CAAC,CAAC;;QAEF;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAT,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAES,QAAQ,CAACE,IAAI,CAAC;QAC5CjB,YAAY,CAAC,CAAC,CAACkB,OAAO,CAACH,QAAQ,CAACE,IAAI;QACpC;;QAEAV,MAAM,CAACY,IAAI,CAAC,GAAG,CAAC;MAClB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdf,OAAO,CAACe,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;QAC1CV,YAAY,CAACI,KAAK,GAAG,kDAAkD;MACzE;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}