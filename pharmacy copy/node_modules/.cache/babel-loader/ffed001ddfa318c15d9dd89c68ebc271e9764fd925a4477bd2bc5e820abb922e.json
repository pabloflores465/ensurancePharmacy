{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"prescriptions-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"mb-4 text-red-600 text-center\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"prescriptions-list\"\n};\nconst _hoisted_4 = {\n  class: \"text-xl font-bold\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[7] || (_cache[7] = _createElementVNode(\"h2\", {\n    class: \"text-2xl font-bold text-center text-blue-800 mb-4\"\n  }, \" Todas las Recetas \", -1 /* HOISTED */)), _createCommentVNode(\" Mensaje de error si lo hay \"), $setup.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString($setup.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Lista de recetas \"), $setup.prescriptions.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.prescriptions, prescription => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: prescription.id,\n      class: \"prescription-item\"\n    }, [_createElementVNode(\"h3\", _hoisted_4, _toDisplayString(prescription.doctor), 1 /* TEXT */), _createElementVNode(\"p\", null, [_cache[0] || (_cache[0] = _createElementVNode(\"strong\", null, \"ID Receta:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(prescription.id.prescriptionId), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[1] || (_cache[1] = _createElementVNode(\"strong\", null, \"ID Usuario:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(prescription.prescription.user.name), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"strong\", null, \"ID Póliza:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(prescription.policyId), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"Diagnóstico:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(prescription.diagnosis), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"strong\", null, \"Fecha:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(prescription.date), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"strong\", null, \"Medicamentos:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(prescription.medicines), 1 /* TEXT */)])]);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_createCommentVNode(\" Mensaje si no hay recetas \"), _cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"text-center text-gray-600\"\n  }, \" No hay recetas disponibles. \", -1 /* HOISTED */))], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","$setup","errorMessage","_hoisted_2","_toDisplayString","prescriptions","length","_hoisted_3","_Fragment","_renderList","prescription","id","_hoisted_4","doctor","_createTextVNode","prescriptionId","user","name","policyId","diagnosis","date","medicines"],"sources":["/Users/nohelestradap/Documents/VsCode/ensurancePharmacy/pharmacy/src/pages/Prescriptions.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"prescriptions-container\">\n    <h2 class=\"text-2xl font-bold text-center text-blue-800 mb-4\">\n      Todas las Recetas\n    </h2>\n\n    <!-- Mensaje de error si lo hay -->\n    <div v-if=\"errorMessage\" class=\"mb-4 text-red-600 text-center\">\n      {{ errorMessage }}\n    </div>\n\n    <!-- Lista de recetas -->\n    <div v-if=\"prescriptions.length > 0\" class=\"prescriptions-list\">\n      <div v-for=\"prescription in prescriptions\" :key=\"prescription.id\" class=\"prescription-item\">\n        <h3 class=\"text-xl font-bold\">{{ prescription.doctor }}</h3>\n        <p><strong>ID Receta:</strong> {{ prescription.id.prescriptionId }}</p>\n        <p><strong>ID Usuario:</strong> {{ prescription.prescription.user.name }}</p>\n        <p><strong>ID Póliza:</strong> {{ prescription.policyId }}</p>\n        <p><strong>Diagnóstico:</strong> {{ prescription.diagnosis }}</p>\n        <p><strong>Fecha:</strong> {{ prescription.date }}</p>\n        <p><strong>Medicamentos:</strong> {{ prescription.medicines }}</p>\n      </div>\n    </div>\n\n    <!-- Mensaje si no hay recetas -->\n    <div v-else class=\"text-center text-gray-600\">\n      No hay recetas disponibles.\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport axios from 'axios';\n\nconst prescriptions = ref([]);\nconst errorMessage = ref('');\nconst ip = process.env.VUE_APP_API_IP || 'localhost';\n\n// Nuevo: Obtener el ID del usuario actual, por ejemplo desde localStorage\nconst userId = localStorage.getItem('userId') || 'defaultUserId'; // ajustar según implementación\n\nconst fetchPrescriptions = async () => {\n  try {\n    // Se añade el parámetro userId a la URL para obtener solo las recetas del usuario actual\n    const response = await axios.get(`http://${ip}:8081/api2/prescription_medicines?userId=${userId}`);\n    prescriptions.value = response.data;\n    console.log(\"RECETAS:\", prescriptions.value)\n  } catch (error) {\n    console.error(\"Error al obtener las recetas:\", error);\n    errorMessage.value = 'Error al obtener las recetas. Por favor, inténtelo de nuevo.';\n  }\n};\n\nonMounted(() => {\n  fetchPrescriptions();\n});\n</script>\n\n<style scoped>\n.prescriptions-container {\n  padding: 50px;\n  background-color: #f8f9fa;\n}\n\n.prescriptions-list {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.prescription-item {\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n}\n</style>\n"],"mappings":";;EAEOA,KAAK,EAAC;AAAyB;;EAFtCC,GAAA;EAQ6BD,KAAK,EAAC;;;EARnCC,GAAA;EAayCD,KAAK,EAAC;;;EAEnCA,KAAK,EAAC;AAAmB;;uBAbnCE,mBAAA,CA2BM,OA3BNC,UA2BM,G,0BA1BJC,mBAAA,CAEK;IAFDJ,KAAK,EAAC;EAAmD,GAAC,qBAE9D,sBAEAK,mBAAA,gCAAmC,EACxBC,MAAA,CAAAC,YAAY,I,cAAvBL,mBAAA,CAEM,OAFNM,UAEM,EAAAC,gBAAA,CADDH,MAAA,CAAAC,YAAY,oBATrBF,mBAAA,gBAYIA,mBAAA,sBAAyB,EACdC,MAAA,CAAAI,aAAa,CAACC,MAAM,Q,cAA/BT,mBAAA,CAUM,OAVNU,UAUM,I,kBATJV,mBAAA,CAQMW,SAAA,QAtBZC,WAAA,CAckCR,MAAA,CAAAI,aAAa,EAA7BK,YAAY;yBAAxBb,mBAAA,CAQM;MARsCD,GAAG,EAAEc,YAAY,CAACC,EAAE;MAAEhB,KAAK,EAAC;QACtEI,mBAAA,CAA4D,MAA5Da,UAA4D,EAAAR,gBAAA,CAA3BM,YAAY,CAACG,MAAM,kBACpDd,mBAAA,CAAuE,Y,0BAApEA,mBAAA,CAA2B,gBAAnB,YAAU,sBAhB7Be,gBAAA,CAgBsC,GAAC,GAAAV,gBAAA,CAAGM,YAAY,CAACC,EAAE,CAACI,cAAc,iB,GAChEhB,mBAAA,CAA6E,Y,0BAA1EA,mBAAA,CAA4B,gBAApB,aAAW,sBAjB9Be,gBAAA,CAiBuC,GAAC,GAAAV,gBAAA,CAAGM,YAAY,CAACA,YAAY,CAACM,IAAI,CAACC,IAAI,iB,GACtElB,mBAAA,CAA8D,Y,0BAA3DA,mBAAA,CAA2B,gBAAnB,YAAU,sBAlB7Be,gBAAA,CAkBsC,GAAC,GAAAV,gBAAA,CAAGM,YAAY,CAACQ,QAAQ,iB,GACvDnB,mBAAA,CAAiE,Y,0BAA9DA,mBAAA,CAA6B,gBAArB,cAAY,sBAnB/Be,gBAAA,CAmBwC,GAAC,GAAAV,gBAAA,CAAGM,YAAY,CAACS,SAAS,iB,GAC1DpB,mBAAA,CAAsD,Y,0BAAnDA,mBAAA,CAAuB,gBAAf,QAAM,sBApBzBe,gBAAA,CAoBkC,GAAC,GAAAV,gBAAA,CAAGM,YAAY,CAACU,IAAI,iB,GAC/CrB,mBAAA,CAAkE,Y,0BAA/DA,mBAAA,CAA8B,gBAAtB,eAAa,sBArBhCe,gBAAA,CAqByC,GAAC,GAAAV,gBAAA,CAAGM,YAAY,CAACW,SAAS,iB;qDAK/DxB,mBAAA,CAEMW,SAAA;IA5BVZ,GAAA;EAAA,IAyBII,mBAAA,+BAAkC,E,0BAClCD,mBAAA,CAEM;IAFMJ,KAAK,EAAC;EAA2B,GAAC,+BAE9C,qB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}