{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, toDisplayString as _toDisplayString, vModelText as _vModelText, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nimport _imports_0 from '@/assets/logo.png';\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nconst _hoisted_2 = {\n  class: \"login-box\"\n};\nconst _hoisted_3 = {\n  class: \"mb-4\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"mb-4\"\n};\nconst _hoisted_5 = {\n  class: \"block text-gray-700\"\n};\nconst _hoisted_6 = {\n  class: \"input-group\"\n};\nconst _hoisted_7 = {\n  class: \"mb-4\"\n};\nconst _hoisted_8 = {\n  class: \"input-group\"\n};\nconst _hoisted_9 = {\n  key: 1,\n  class: \"mb-4\"\n};\nconst _hoisted_10 = {\n  class: \"input-group\"\n};\nconst _hoisted_11 = {\n  class: \"mb-4\"\n};\nconst _hoisted_12 = {\n  class: \"input-group\"\n};\nconst _hoisted_13 = {\n  key: 2,\n  class: \"mb-4 text-red-600 text-center\"\n};\nconst _hoisted_14 = {\n  class: \"text-center mt-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" SecciÃ³n izquierda con imagen de fondo \"), _cache[18] || (_cache[18] = _createElementVNode(\"div\", {\n    class: \"login-image\"\n  }, null, -1 /* HOISTED */)), _createCommentVNode(\" SecciÃ³n derecha con formulario \"), _createElementVNode(\"div\", _hoisted_2, [_cache[16] || (_cache[16] = _createElementVNode(\"div\", {\n    class: \"logo-container\"\n  }, [_createElementVNode(\"img\", {\n    src: _imports_0,\n    alt: \"Farmacia Logo\",\n    class: \"logo\"\n  })], -1 /* HOISTED */)), _cache[17] || (_cache[17] = _createElementVNode(\"h2\", {\n    class: \"text-2xl font-bold text-center text-blue-800 mb-4\"\n  }, \"Iniciar SesiÃ³n\", -1 /* HOISTED */)), _createCommentVNode(\" Selector de tipo de usuario \"), _createElementVNode(\"div\", _hoisted_3, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    class: \"block text-gray-700\"\n  }, \"Selecciona tu rol:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.role = $event),\n    class: \"w-full p-2 border rounded-lg\"\n  }, _cache[5] || (_cache[5] = [_createElementVNode(\"option\", {\n    value: \"user\"\n  }, \"Usuario\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"employee\"\n  }, \"Empleado\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"admin\"\n  }, \"Administrador\", -1 /* HOISTED */)]), 512 /* NEED_PATCH */), [[_vModelSelect, $setup.role]])]), _createCommentVNode(\" Formulario de inicio de sesiÃ³n \"), _createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.login, [\"prevent\"])\n  }, [_createCommentVNode(\" Para usuarios y empleados \"), $setup.role === 'user' || $setup.role === 'employee' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"label\", _hoisted_5, _toDisplayString($setup.role === 'user' ? \"NÃºmero de Usuario\" : \"NÃºmero de Empleado\"), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_6, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.identifier = $event),\n    type: \"text\",\n    class: \"input-field\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.identifier]]), _cache[7] || (_cache[7] = _createElementVNode(\"span\", {\n    class: \"icon\"\n  }, \"ðŸ‘¤\", -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_7, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    class: \"block text-gray-700\"\n  }, \"ContraseÃ±a\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.adminPassword = $event),\n    type: \"password\",\n    class: \"input-field\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.adminPassword]]), _cache[8] || (_cache[8] = _createElementVNode(\"span\", {\n    class: \"icon\"\n  }, \"ðŸ”’\", -1 /* HOISTED */))])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Para administradores \"), $setup.role === 'admin' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    class: \"block text-gray-700\"\n  }, \"Usuario Administrador\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_10, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.adminUsername = $event),\n    type: \"text\",\n    class: \"input-field\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.adminUsername]]), _cache[10] || (_cache[10] = _createElementVNode(\"span\", {\n    class: \"icon\"\n  }, \"ðŸ‘¤\", -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_11, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    class: \"block text-gray-700\"\n  }, \"ContraseÃ±a\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_12, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.adminPassword = $event),\n    type: \"password\",\n    class: \"input-field\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.adminPassword]]), _cache[11] || (_cache[11] = _createElementVNode(\"span\", {\n    class: \"icon\"\n  }, \"ðŸ”’\", -1 /* HOISTED */))])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Mensaje de error \"), $setup.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _toDisplayString($setup.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" BotÃ³n de inicio de sesiÃ³n \"), _cache[14] || (_cache[14] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"login-button\"\n  }, \" Iniciar sesiÃ³n â†’ \", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */), _createCommentVNode(\" Enlace para registrarse \"), _createElementVNode(\"div\", _hoisted_14, [_createVNode(_component_router_link, {\n    to: \"/register\",\n    class: \"text-blue-500 hover:underline\"\n  }, {\n    default: _withCtx(() => _cache[15] || (_cache[15] = [_createTextVNode(\"RegÃ­strarse aquÃ­\")])),\n    _: 1 /* STABLE */\n  })])])]);\n}","map":{"version":3,"names":["_imports_0","class","key","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","src","alt","_hoisted_3","_cache","$event","$setup","role","value","onSubmit","_withModifiers","login","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_6","identifier","type","required","_hoisted_7","_hoisted_8","adminPassword","_hoisted_9","_hoisted_10","adminUsername","_hoisted_11","_hoisted_12","errorMessage","_hoisted_13","_hoisted_14","_createVNode","_component_router_link","to","default","_withCtx","_createTextVNode","_"],"sources":["/Users/nohelestradap/Documents/VsCode/ensurancePharmacy/pharmacy/src/pages/Login.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"login-container\">\n    <!-- SecciÃ³n izquierda con imagen de fondo -->\n    <div class=\"login-image\"></div>\n\n    <!-- SecciÃ³n derecha con formulario -->\n    <div class=\"login-box\">\n      <div class=\"logo-container\">\n        <img src=\"@/assets/logo.png\" alt=\"Farmacia Logo\" class=\"logo\" />\n      </div>\n\n      <h2 class=\"text-2xl font-bold text-center text-blue-800 mb-4\">Iniciar SesiÃ³n</h2>\n\n      <!-- Selector de tipo de usuario -->\n      <div class=\"mb-4\">\n        <label class=\"block text-gray-700\">Selecciona tu rol:</label>\n        <select v-model=\"role\" class=\"w-full p-2 border rounded-lg\">\n          <option value=\"user\">Usuario</option>\n          <option value=\"employee\">Empleado</option>\n          <option value=\"admin\">Administrador</option>\n        </select>\n      </div>\n\n      <!-- Formulario de inicio de sesiÃ³n -->\n      <form @submit.prevent=\"login\">\n        <!-- Para usuarios y empleados -->\n        <div v-if=\"role === 'user' || role === 'employee'\" class=\"mb-4\">\n          <label class=\"block text-gray-700\">\n            {{ role === 'user' ? \"NÃºmero de Usuario\" : \"NÃºmero de Empleado\" }}\n          </label>\n          <div class=\"input-group\">\n            <input v-model=\"identifier\" type=\"text\" class=\"input-field\" required />\n            <span class=\"icon\">ðŸ‘¤</span>\n          </div>\n          <div class=\"mb-4\">\n            <label class=\"block text-gray-700\">ContraseÃ±a</label>\n            <div class=\"input-group\">\n              <input v-model=\"adminPassword\" type=\"password\" class=\"input-field\" required />\n              <span class=\"icon\">ðŸ”’</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Para administradores -->\n        <div v-if=\"role === 'admin'\" class=\"mb-4\">\n          <label class=\"block text-gray-700\">Usuario Administrador</label>\n          <div class=\"input-group\">\n            <input v-model=\"adminUsername\" type=\"text\" class=\"input-field\" required />\n            <span class=\"icon\">ðŸ‘¤</span>\n          </div>\n          <div class=\"mb-4\">\n            <label class=\"block text-gray-700\">ContraseÃ±a</label>\n            <div class=\"input-group\">\n              <input v-model=\"adminPassword\" type=\"password\" class=\"input-field\" required />\n              <span class=\"icon\">ðŸ”’</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Mensaje de error -->\n        <div v-if=\"errorMessage\" class=\"mb-4 text-red-600 text-center\">\n          {{ errorMessage }}\n        </div>\n\n        <!-- BotÃ³n de inicio de sesiÃ³n -->\n        <button type=\"submit\" class=\"login-button\">\n          Iniciar sesiÃ³n â†’\n        </button>\n      </form>\n      <!-- Enlace para registrarse -->\n      <div class=\"text-center mt-4\">\n        <router-link to=\"/register\" class=\"text-blue-500 hover:underline\">RegÃ­strarse aquÃ­</router-link>\n      </div>\n      \n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\n\n// AsegÃºrate de tener definida la variable de entorno (p. ej., VUE_APP_IP)\nconst ip = process.env.VUE_APP_IP;\nconsole.log(\"IP del servidor: \" + ip);\n\nconst router = useRouter();\n\n// Variables reactivas para los campos del formulario\nconst role = ref('user'); \nconst identifier = ref('');\nconst adminUsername = ref('');\nconst adminPassword = ref('');\nconst errorMessage = ref('');\n\n// FunciÃ³n de login que valida las credenciales llamando a la API\nconst login = async () => {\n  errorMessage.value = '';\n\n  // Objeto payload que se enviarÃ¡ a la API\n  let payload = { role: role.value };\n\n  if (role.value === 'user' || role.value === 'employee') {\n    if (identifier.value.trim() === '' || adminPassword.value.trim() === '') {\n      errorMessage.value = \"El nÃºmero de usuario/empleado y la contraseÃ±a son obligatorios.\";\n      return;\n    }\n    payload.username = identifier.value;\n    payload.password = adminPassword.value;\n  } else if (role.value === 'admin') {\n    if (adminUsername.value.trim() === '' || adminPassword.value.trim() === '') {\n      errorMessage.value = \"Usuario y contraseÃ±a son obligatorios.\";\n      return;\n    }\n    payload.username = adminUsername.value;\n    payload.password = adminPassword.value;\n  }\n\n  try {\n    // Llamada POST al endpoint /api2/login\n    const response = await axios.post(`http://${ip}:8000/api2/login`, payload);\n    console.log(\"Login exitoso:\", response.data);\n    // Si la respuesta es exitosa, redirige al inicio o a la ruta deseada\n    router.push('/');\n  } catch (error) {\n    console.error(\"Error en el login:\", error);\n    errorMessage.value = 'Credenciales incorrectas o error en el servidor.';\n  }\n};\n</script>\n\n<style scoped>\n/* DiseÃ±o de dos columnas */\n.login-container {\n  display: flex;\n  height: 100vh;\n  background-color: #f8f9fa;\n}\n\n/* SecciÃ³n izquierda con imagen de fondo */\n.login-image {\n  flex: 1;\n  background-image: url(@/assets/farmacialog.jpg);\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* SecciÃ³n derecha (Formulario) */\n.login-box {\n  flex: 1;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 50px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);\n  border-radius: 15px;\n}\n\n/* Logo */\n.logo-container {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n}\n.logo {\n  max-width: 150px;\n}\n\n/* Inputs estilizados */\n.input-group {\n  position: relative;\n  width: 100%;\n}\n.input-field {\n  width: 100%;\n  padding: 12px 40px 12px 12px;\n  border: 1px solid #ccc;\n  border-radius: 8px;\n  font-size: 16px;\n}\n.icon {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n/* BotÃ³n estilizado */\n.login-button {\n  width: 100%;\n  background: #1e40af;\n  color: white;\n  padding: 12px;\n  border-radius: 8px;\n  font-size: 18px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: 0.3s;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.login-button:hover {\n  background: #1e3a8a;\n}\n\n/* Responsivo */\n@media (max-width: 768px) {\n  .login-container {\n    flex-direction: column;\n  }\n  .login-image {\n    display: none; /* Ocultar imagen en pantallas pequeÃ±as */\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}