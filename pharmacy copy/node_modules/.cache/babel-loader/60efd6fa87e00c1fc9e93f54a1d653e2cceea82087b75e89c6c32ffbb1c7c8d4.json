{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"comments-container\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = {\n  key: 1\n};\nconst _hoisted_5 = {\n  class: \"add-comment\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ProductComments = _resolveComponent(\"ProductComments\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[5] || (_cache[5] = _createElementVNode(\"h3\", null, \"Comentarios\", -1 /* HOISTED */)), $setup.comments.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_ctx.comment.enabled !== false ? (_openBlock(true), _createElementBlock(_Fragment, {\n    key: 0\n  }, _renderList($setup.comments, comment => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: comment.id,\n      class: \"comment\"\n    }, [_createElementVNode(\"p\", null, [_createElementVNode(\"strong\", null, _toDisplayString(comment.author), 1 /* TEXT */), _cache[3] || (_cache[3] = _createTextVNode(\":\"))]), _createElementVNode(\"p\", null, _toDisplayString(comment.text), 1 /* TEXT */), _createCommentVNode(\" Mostrar botón de eliminar solo para admin \"), $setup.isAdmin ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => $setup.deleteComment(comment)\n    }, \"Eliminar\", 8 /* PROPS */, _hoisted_3)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Renderizado recursivo: si existen comentarios hijos \"), comment.children && comment.children.length ? (_openBlock(), _createBlock(_component_ProductComments, {\n      key: 1,\n      initialComments: comment.children\n    }, null, 8 /* PROPS */, [\"initialComments\"])) : _createCommentVNode(\"v-if\", true)]);\n  }), 128 /* KEYED_FRAGMENT */)) : _createCommentVNode(\"v-if\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _cache[4] || (_cache[4] = [_createElementVNode(\"p\", null, \"No hay comentarios aún.\", -1 /* HOISTED */)]))), _createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.newCommentAuthor = $event),\n    placeholder: \"Tu nombre\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.newCommentAuthor]]), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.newCommentText = $event),\n    placeholder: \"Escribe un comentario...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.newCommentText]]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $setup.addComment && $setup.addComment(...args))\n  }, \"Agregar Comentario\")])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","$setup","comments","length","_hoisted_2","_ctx","comment","enabled","_Fragment","_renderList","id","_toDisplayString","author","_createTextVNode","text","_createCommentVNode","isAdmin","onClick","$event","deleteComment","_hoisted_3","children","_createBlock","_component_ProductComments","initialComments","_hoisted_4","_cache","_hoisted_5","newCommentAuthor","placeholder","newCommentText","args","addComment"],"sources":["/Users/nohelestradap/Documents/VsCode/ensurancePharmacy/pharmacy/src/components/Comentarios.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"comments-container\">\n    <h3>Comentarios</h3>\n    <div v-if=\"comments.length\">\n      <div v-for=\"comment in comments\" :key=\"comment.id\" class=\"comment\" v-if=\"comment.enabled !== false\">\n        <p><strong>{{ comment.author }}</strong>:</p>\n        <p>{{ comment.text }}</p>\n        <!-- Mostrar botón de eliminar solo para admin -->\n        <button v-if=\"isAdmin\" @click=\"deleteComment(comment)\">Eliminar</button>\n        <!-- Renderizado recursivo: si existen comentarios hijos -->\n        <ProductComments v-if=\"comment.children && comment.children.length\" :initialComments=\"comment.children\" />\n      </div>\n    </div>\n    <div v-else>\n      <p>No hay comentarios aún.</p>\n    </div>\n    <div class=\"add-comment\">\n      <input v-model=\"newCommentAuthor\" placeholder=\"Tu nombre\" />\n      <textarea v-model=\"newCommentText\" placeholder=\"Escribe un comentario...\"></textarea>\n      <button @click=\"addComment\">Agregar Comentario</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { ref, computed } from 'vue';\nimport { useUserStore } from '@/stores/userStore';\nimport ProductComments from './Comentarios.vue';\n\nconst userStore = useUserStore();\n\nexport default {\n  name: 'ProductComments', // Renamed from 'Comentarios ' to 'ProductComments'\n  props: {\n    initialComments: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup(props) {\n    const comments = ref([...props.initialComments]);\n    const newCommentAuthor = ref('');\n    const newCommentText = ref('');\n\n    const isAdmin = computed(() => userStore.user && userStore.user.role === 'admin');\n\n    const addComment = () => {\n      if (newCommentAuthor.value && newCommentText.value) {\n        comments.value.push({\n          id: Date.now(),\n          author: newCommentAuthor.value,\n          text: newCommentText.value,\n          enabled: true // Asegurarse de que los nuevos comentarios estén habilitados\n        });\n        newCommentAuthor.value = '';\n        newCommentText.value = '';\n      }\n    };\n\n    const deleteComment = (comment) => {\n      // Opcional: Enviar petición PUT a la API para actualizar el comentario\n      axios.put(`http://tu-api-url/comments/${comment.id}`, { enabled: false })\n        .then(() => {\n          comment.enabled = false;\n        })\n        .catch(error => {\n          console.error('Error al eliminar el comentario:', error);\n        });\n    };\n\n    return {\n      comments,\n      newCommentAuthor,\n      newCommentText,\n      addComment,\n      isAdmin,\n      deleteComment,\n      ProductComments\n    };\n  }\n};\n</script>\n\n<style scoped>\n.comments-container {\n  margin-top: 20px;\n}\n\n.comment {\n  background: #f9f9f9;\n  padding: 10px;\n  border-radius: 5px;\n  margin-bottom: 10px;\n  margin-left: 20px;\n  border-left: 1px solid #ccc;\n  padding-left: 10px;\n}\n\n.add-comment {\n  margin-top: 20px;\n}\n\n.add-comment input,\n.add-comment textarea {\n  width: 100%;\n  padding: 10px;\n  margin-bottom: 10px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n}\n\n.add-comment button {\n  padding: 10px 15px;\n  background: #1e40af;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.add-comment button:hover {\n  background: #1e3a8a;\n}\n</style>\n"],"mappings":";;EAEOA,KAAK,EAAC;AAAoB;;EAFjCC,GAAA;AAAA;mBAAA;;EAAAA,GAAA;AAAA;;EAiBSD,KAAK,EAAC;AAAa;;;uBAf1BE,mBAAA,CAoBM,OApBNC,UAoBM,G,0BAnBJC,mBAAA,CAAoB,YAAhB,aAAW,sBACJC,MAAA,CAAAC,QAAQ,CAACC,MAAM,I,cAA1BL,mBAAA,CASM,OAbVM,UAAA,GAK+EC,IAAA,CAAAC,OAAO,CAACC,OAAO,c,kBAAxFT,mBAAA,CAOMU,SAAA;IAZZX,GAAA;EAAA,GAAAY,WAAA,CAK6BR,MAAA,CAAAC,QAAQ,EAAnBI,OAAO;yBAAnBR,mBAAA,CAOM;MAP4BD,GAAG,EAAES,OAAO,CAACI,EAAE;MAAEd,KAAK,EAAC;QACvDI,mBAAA,CAA6C,YAA1CA,mBAAA,CAAqC,gBAAAW,gBAAA,CAA1BL,OAAO,CAACM,MAAM,kB,0BANpCC,gBAAA,CAMgD,GAAC,G,GACzCb,mBAAA,CAAyB,WAAAW,gBAAA,CAAnBL,OAAO,CAACQ,IAAI,kBAClBC,mBAAA,+CAAkD,EACpCd,MAAA,CAAAe,OAAO,I,cAArBlB,mBAAA,CAAwE;MAThFD,GAAA;MASgCoB,OAAK,EAAAC,MAAA,IAAEjB,MAAA,CAAAkB,aAAa,CAACb,OAAO;OAAG,UAAQ,iBATvEc,UAAA,KAAAL,mBAAA,gBAUQA,mBAAA,yDAA4D,EACrCT,OAAO,CAACe,QAAQ,IAAIf,OAAO,CAACe,QAAQ,CAAClB,MAAM,I,cAAlEmB,YAAA,CAA0GC,0BAAA;MAXlH1B,GAAA;MAW6E2B,eAAe,EAAElB,OAAO,CAACe;oDAXtGN,mBAAA,e;mCAAAA,mBAAA,e,oBAcIjB,mBAAA,CAEM,OAhBV2B,UAAA,EAAAC,MAAA,QAAAA,MAAA,OAeM1B,mBAAA,CAA8B,WAA3B,yBAAuB,oB,KAE5BA,mBAAA,CAIM,OAJN2B,UAIM,G,gBAHJ3B,mBAAA,CAA4D;IAlBlE,uBAAA0B,MAAA,QAAAA,MAAA,MAAAR,MAAA,IAkBsBjB,MAAA,CAAA2B,gBAAgB,GAAAV,MAAA;IAAEW,WAAW,EAAC;iDAA9B5B,MAAA,CAAA2B,gBAAgB,E,mBAChC5B,mBAAA,CAAqF;IAnB3F,uBAAA0B,MAAA,QAAAA,MAAA,MAAAR,MAAA,IAmByBjB,MAAA,CAAA6B,cAAc,GAAAZ,MAAA;IAAEW,WAAW,EAAC;iDAA5B5B,MAAA,CAAA6B,cAAc,E,GACjC9B,mBAAA,CAAuD;IAA9CiB,OAAK,EAAAS,MAAA,QAAAA,MAAA,UAAAK,IAAA,KAAE9B,MAAA,CAAA+B,UAAA,IAAA/B,MAAA,CAAA+B,UAAA,IAAAD,IAAA,CAAU;KAAE,oBAAkB,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}