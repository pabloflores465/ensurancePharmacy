{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport axios from 'axios';\nexport default {\n  __name: 'Prescriptions',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const prescriptions = ref([]);\n    const errorMessage = ref('');\n    const ip = process.env.VUE_APP_API_IP || 'localhost';\n\n    // Nuevo: Obtener el ID del usuario actual, por ejemplo desde localStorage\n    const userId = localStorage.getItem('userId') || 'defaultUserId'; // ajustar según implementación\n\n    const fetchPrescriptions = async () => {\n      try {\n        // Se añade el parámetro userId a la URL para obtener solo las recetas del usuario actual\n        const response = await axios.get(`http://${ip}:8081/api2/prescription_medicines?userId=${userId}`);\n        prescriptions.value = response.data;\n        console.log(\"RECETAS:\", prescriptions.value);\n      } catch (error) {\n        console.error(\"Error al obtener las recetas:\", error);\n        errorMessage.value = 'Error al obtener las recetas. Por favor, inténtelo de nuevo.';\n      }\n    };\n    onMounted(() => {\n      fetchPrescriptions();\n    });\n    const __returned__ = {\n      prescriptions,\n      errorMessage,\n      ip,\n      userId,\n      fetchPrescriptions,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","prescriptions","errorMessage","ip","process","env","VUE_APP_API_IP","userId","localStorage","getItem","fetchPrescriptions","response","get","value","data","console","log","error"],"sources":["/Users/nohelestradap/Documents/VsCode/ensurancePharmacy/pharmacy/src/pages/Prescriptions.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"prescriptions-container\">\n    <h2 class=\"text-2xl font-bold text-center text-blue-800 mb-4\">\n      Todas las Recetas\n    </h2>\n\n    <!-- Mensaje de error si lo hay -->\n    <div v-if=\"errorMessage\" class=\"mb-4 text-red-600 text-center\">\n      {{ errorMessage }}\n    </div>\n\n    <!-- Lista de recetas -->\n    <div v-if=\"prescriptions.length > 0\" class=\"prescriptions-list\">\n      <div v-for=\"prescription in prescriptions\" :key=\"prescription.id\" class=\"prescription-item\">\n        <h3 class=\"text-xl font-bold\">{{ prescription.doctor }}</h3>\n        <p><strong>ID Receta:</strong> {{ prescription.id.prescriptionId }}</p>\n        <p><strong>ID Usuario:</strong> {{ prescription.prescription.user.idUser }}</p>\n        <p><strong>ID Póliza:</strong> {{ prescription.policyId }}</p>\n        <p><strong>Diagnóstico:</strong> {{ prescription.diagnosis }}</p>\n        <p><strong>Fecha:</strong> {{ prescription.date }}</p>\n        <p><strong>Medicamentos:</strong> {{ prescription.medicines }}</p>\n      </div>\n    </div>\n\n    <!-- Mensaje si no hay recetas -->\n    <div v-else class=\"text-center text-gray-600\">\n      No hay recetas disponibles.\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport axios from 'axios';\n\nconst prescriptions = ref([]);\nconst errorMessage = ref('');\nconst ip = process.env.VUE_APP_API_IP || 'localhost';\n\n// Nuevo: Obtener el ID del usuario actual, por ejemplo desde localStorage\nconst userId = localStorage.getItem('userId') || 'defaultUserId'; // ajustar según implementación\n\nconst fetchPrescriptions = async () => {\n  try {\n    // Se añade el parámetro userId a la URL para obtener solo las recetas del usuario actual\n    const response = await axios.get(`http://${ip}:8081/api2/prescription_medicines?userId=${userId}`);\n    prescriptions.value = response.data;\n    console.log(\"RECETAS:\", prescriptions.value)\n  } catch (error) {\n    console.error(\"Error al obtener las recetas:\", error);\n    errorMessage.value = 'Error al obtener las recetas. Por favor, inténtelo de nuevo.';\n  }\n};\n\nonMounted(() => {\n  fetchPrescriptions();\n});\n</script>\n\n<style scoped>\n.prescriptions-container {\n  padding: 50px;\n  background-color: #f8f9fa;\n}\n\n.prescriptions-list {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.prescription-item {\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n}\n</style>\n"],"mappings":"AAiCA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,aAAa,GAAGH,GAAG,CAAC,EAAE,CAAC;IAC7B,MAAMI,YAAY,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMK,EAAE,GAAGC,OAAO,CAACC,GAAG,CAACC,cAAc,IAAI,WAAW;;IAEpD;IACA,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,IAAI,eAAe,CAAC,CAAC;;IAElE,MAAMC,kBAAkB,GAAG,MAAAA,CAAA,KAAY;MACrC,IAAI;QACF;QACA,MAAMC,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,UAAUT,EAAE,4CAA4CI,MAAM,EAAE,CAAC;QAClGN,aAAa,CAACY,KAAK,GAAGF,QAAQ,CAACG,IAAI;QACnCC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEf,aAAa,CAACY,KAAK;MAC7C,CAAC,CAAC,OAAOI,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;QACrDf,YAAY,CAACW,KAAK,GAAG,8DAA8D;MACrF;IACF,CAAC;IAEDd,SAAS,CAAC,MAAM;MACdW,kBAAkB,CAAC,CAAC;IACtB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}