{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\n\n// Normalmente definimos el IP en una variable de entorno\n// Asegúrate de que esté configurado en tu .env\n\nexport default {\n  __name: 'Register',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const ip = process.env.VUE_APP_IP;\n    const router = useRouter();\n\n    // Campos\n    const name = ref('');\n    const cui = ref('');\n    const phone = ref('');\n    const email = ref('');\n    const address = ref('');\n    const birthdate = ref('');\n    const role = ref(''); // Por si quieres asignar un rol\n    const idPolicy = ref('');\n    const enabled = ref(true); // Por defecto true\n    const password = ref('');\n\n    // Manejo del registro\n    const register = async () => {\n      // Aquí hacemos la llamada POST a /api2/login (aunque lo usual sería /api2/register)\n      try {\n        console.log('Registrando:', {\n          name: name.value,\n          cui: cui.value,\n          phone: phone.value,\n          email: email.value,\n          address: address.value,\n          birthdate: birthdate.value,\n          role: role.value,\n          idPolicy: idPolicy.value,\n          enabled: enabled.value,\n          password: password.value\n        });\n\n        // Llamada al endpoint con Axios\n        const response = await axios.post(`http://${ip}:8000/api2/users`, {\n          name: name.value,\n          cui: cui.value,\n          phone: phone.value,\n          email: email.value,\n          address: address.value,\n          birthDate: birthdate.value,\n          role: \"usuario\",\n          enabled: 1,\n          password: password.value\n        });\n\n        // Si todo sale bien, puedes mostrar un mensaje o redirigir\n        console.log('Registro exitoso:', response.data);\n\n        // Redirigir al login\n        router.push('/login');\n      } catch (error) {\n        console.error('Error al registrar:', error);\n        // Muestra algún mensaje de error al usuario si lo deseas\n        alert('Ocurrió un error al registrar. Revisa la consola para más detalles.');\n      }\n    };\n\n    // Función para ir a la pantalla de login\n    const goToLogin = () => {\n      router.push('/login');\n    };\n    const __returned__ = {\n      ip,\n      router,\n      name,\n      cui,\n      phone,\n      email,\n      address,\n      birthdate,\n      role,\n      idPolicy,\n      enabled,\n      password,\n      register,\n      goToLogin,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRouter","axios","ip","process","env","VUE_APP_IP","router","name","cui","phone","email","address","birthdate","role","idPolicy","enabled","password","register","console","log","value","response","post","birthDate","data","push","error","alert","goToLogin"],"sources":["/Users/nohelestradap/Documents/VsCode/ensurancePharmacy/pharmacy/src/pages/Register.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"register-container\">\n    <!-- Sección izquierda con imagen de fondo -->\n    <div class=\"register-image\"></div>\n\n    <!-- Sección derecha con el formulario -->\n    <div class=\"register-box\">\n      <h1 class=\"text-2xl font-bold text-center text-blue-800 mb-4\">Registro</h1>\n      <img src=\"@/assets/logo.png\" alt=\"Pharmacy Registration\" class=\"logo\" />\n\n      <form @submit.prevent=\"register\">\n        <!-- Nombre -->\n        <div class=\"form-group\">\n          <label for=\"name\">Nombre</label>\n          <div class=\"input-group\">\n            <input type=\"text\" id=\"name\" v-model=\"name\" required />\n            <span class=\"icon\">👤</span>\n          </div>\n        </div>\n\n        <!-- CUI -->\n        <div class=\"form-group\">\n          <label for=\"cui\">CUI</label>\n          <div class=\"input-group\">\n            <input type=\"text\" id=\"cui\" v-model=\"cui\" required />\n            <span class=\"icon\">🆔</span>\n          </div>\n        </div>\n\n        <!-- Teléfono -->\n        <div class=\"form-group\">\n          <label for=\"phone\">Teléfono</label>\n          <div class=\"input-group\">\n            <input type=\"tel\" id=\"phone\" v-model=\"phone\" required />\n            <span class=\"icon\">☎️</span>\n          </div>\n        </div>\n\n        <!-- Correo Electrónico -->\n        <div class=\"form-group\">\n          <label for=\"email\">Correo Electrónico</label>\n          <div class=\"input-group\">\n            <input type=\"email\" id=\"email\" v-model=\"email\" required />\n            <span class=\"icon\">📧</span>\n          </div>\n        </div>\n\n        <!-- Dirección -->\n        <div class=\"form-group\">\n          <label for=\"address\">Dirección</label>\n          <div class=\"input-group\">\n            <input type=\"text\" id=\"address\" v-model=\"address\" required />\n            <span class=\"icon\">📍</span>\n          </div>\n        </div>\n\n        <!-- Fecha de Nacimiento -->\n        <div class=\"form-group\">\n          <label for=\"birthdate\">Fecha de Nacimiento</label>\n          <div class=\"input-group\">\n            <input type=\"date\" id=\"birthdate\" v-model=\"birthdate\" required />\n            <span class=\"icon\">📅</span>\n          </div>\n        </div>\n\n        <!-- ID_POLICY -->\n        <div class=\"form-group\">\n          <label for=\"idPolicy\">ID de Póliza</label>\n          <div class=\"input-group\">\n            <input type=\"text\" id=\"idPolicy\" v-model=\"idPolicy\" />\n            <span class=\"icon\">📑</span>\n          </div>\n        </div>\n\n        <!-- Contraseña -->\n        <div class=\"form-group\">\n          <label for=\"password\">Contraseña</label>\n          <div class=\"input-group\">\n            <input type=\"password\" id=\"password\" v-model=\"password\" required />\n            <span class=\"icon\">🔒</span>\n          </div>\n        </div>\n\n        <!-- Botón de registro -->\n        <button type=\"submit\" class=\"register-button\">\n          Registrarse →\n        </button>\n\n        <!-- Redirección a Login -->\n        <p class=\"text-center text-sm mt-4\">\n          ¿Ya tienes una cuenta?\n          <a @click=\"goToLogin\" class=\"text-blue-600 hover:underline cursor-pointer\">Iniciar sesión</a>\n        </p>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\n\n// Normalmente definimos el IP en una variable de entorno\n// Asegúrate de que esté configurado en tu .env\nconst ip = process.env.VUE_APP_IP; \n\nconst router = useRouter();\n\n// Campos\nconst name = ref('');\nconst cui = ref('');\nconst phone = ref('');\nconst email = ref('');\nconst address = ref('');\nconst birthdate = ref('');\nconst role = ref('');        // Por si quieres asignar un rol\nconst idPolicy = ref('');\nconst enabled = ref(true);   // Por defecto true\nconst password = ref('');\n\n// Manejo del registro\nconst register = async () => {\n  // Aquí hacemos la llamada POST a /api2/login (aunque lo usual sería /api2/register)\n  try {\n    console.log('Registrando:', {\n      name: name.value,\n      cui: cui.value,\n      phone: phone.value,\n      email: email.value,\n      address: address.value,\n      birthdate: birthdate.value,\n      role: role.value,\n      idPolicy: idPolicy.value,\n      enabled: enabled.value,\n      password: password.value\n    });\n\n    // Llamada al endpoint con Axios\n    const response = await axios.post(`http://${ip}:8000/api2/users`, {\n      name: name.value,\n      cui: cui.value,\n      phone: phone.value,\n      email: email.value,\n      address: address.value,\n      birthDate: birthdate.value,\n      role: \"usuario\",\n      enabled: 1,\n      password: password.value\n    });\n\n    // Si todo sale bien, puedes mostrar un mensaje o redirigir\n    console.log('Registro exitoso:', response.data);\n\n    // Redirigir al login\n    router.push('/login');\n  } catch (error) {\n    console.error('Error al registrar:', error);\n    // Muestra algún mensaje de error al usuario si lo deseas\n    alert('Ocurrió un error al registrar. Revisa la consola para más detalles.');\n  }\n};\n\n// Función para ir a la pantalla de login\nconst goToLogin = () => {\n  router.push('/login');\n};\n</script>\n\n<style scoped>\n/* Estilos del formulario */\n.register-container {\n  display: flex;\n  height: 100vh;\n  background-color: #f8f9fa;\n}\n\n.register-image {\n  flex: 1;\n  background: url('@/assets/farmaciareg.jpeg') no-repeat center center;\n  background-size: cover;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.register-box {\n  flex: 1;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 50px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);\n  border-radius: 15px;\n}\n\n.logo {\n  max-width: 120px;\n  margin-bottom: 20px;\n}\n\nform {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  max-width: 400px;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\nlabel {\n  font-weight: bold;\n  color: #495057;\n}\n\n.input-group {\n  position: relative;\n  width: 100%;\n}\n\ninput, select {\n  width: 100%;\n  padding: 12px 40px 12px 12px;\n  border: 1px solid #ced4da;\n  border-radius: 8px;\n  font-size: 16px;\n}\n\n.icon {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #6c757d;\n}\n\n.register-button {\n  width: 100%;\n  background: #1e40af;\n  color: white;\n  padding: 12px;\n  border-radius: 8px;\n  font-size: 18px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: 0.3s;\n  text-align: center;\n}\n\n.register-button:hover {\n  background: #1e3a8a;\n}\n\n@media (max-width: 768px) {\n  .register-container {\n    flex-direction: column;\n  }\n  .register-image {\n    display: none;\n  }\n}\n</style>"],"mappings":";AAoGA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AACA;;;;;;;;IACA,MAAMC,EAAE,GAAGC,OAAO,CAACC,GAAG,CAACC,UAAU;IAEjC,MAAMC,MAAM,GAAGN,SAAS,CAAC,CAAC;;IAE1B;IACA,MAAMO,IAAI,GAAGR,GAAG,CAAC,EAAE,CAAC;IACpB,MAAMS,GAAG,GAAGT,GAAG,CAAC,EAAE,CAAC;IACnB,MAAMU,KAAK,GAAGV,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMW,KAAK,GAAGX,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMY,OAAO,GAAGZ,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMa,SAAS,GAAGb,GAAG,CAAC,EAAE,CAAC;IACzB,MAAMc,IAAI,GAAGd,GAAG,CAAC,EAAE,CAAC,CAAC,CAAQ;IAC7B,MAAMe,QAAQ,GAAGf,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMgB,OAAO,GAAGhB,GAAG,CAAC,IAAI,CAAC,CAAC,CAAG;IAC7B,MAAMiB,QAAQ,GAAGjB,GAAG,CAAC,EAAE,CAAC;;IAExB;IACA,MAAMkB,QAAQ,GAAG,MAAAA,CAAA,KAAY;MAC3B;MACA,IAAI;QACFC,OAAO,CAACC,GAAG,CAAC,cAAc,EAAE;UAC1BZ,IAAI,EAAEA,IAAI,CAACa,KAAK;UAChBZ,GAAG,EAAEA,GAAG,CAACY,KAAK;UACdX,KAAK,EAAEA,KAAK,CAACW,KAAK;UAClBV,KAAK,EAAEA,KAAK,CAACU,KAAK;UAClBT,OAAO,EAAEA,OAAO,CAACS,KAAK;UACtBR,SAAS,EAAEA,SAAS,CAACQ,KAAK;UAC1BP,IAAI,EAAEA,IAAI,CAACO,KAAK;UAChBN,QAAQ,EAAEA,QAAQ,CAACM,KAAK;UACxBL,OAAO,EAAEA,OAAO,CAACK,KAAK;UACtBJ,QAAQ,EAAEA,QAAQ,CAACI;QACrB,CAAC,CAAC;;QAEF;QACA,MAAMC,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAAC,UAAUpB,EAAE,kBAAkB,EAAE;UAChEK,IAAI,EAAEA,IAAI,CAACa,KAAK;UAChBZ,GAAG,EAAEA,GAAG,CAACY,KAAK;UACdX,KAAK,EAAEA,KAAK,CAACW,KAAK;UAClBV,KAAK,EAAEA,KAAK,CAACU,KAAK;UAClBT,OAAO,EAAEA,OAAO,CAACS,KAAK;UACtBG,SAAS,EAAEX,SAAS,CAACQ,KAAK;UAC1BP,IAAI,EAAE,SAAS;UACfE,OAAO,EAAE,CAAC;UACVC,QAAQ,EAAEA,QAAQ,CAACI;QACrB,CAAC,CAAC;;QAEF;QACAF,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEE,QAAQ,CAACG,IAAI,CAAC;;QAE/C;QACAlB,MAAM,CAACmB,IAAI,CAAC,QAAQ,CAAC;MACvB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdR,OAAO,CAACQ,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3C;QACAC,KAAK,CAAC,qEAAqE,CAAC;MAC9E;IACF,CAAC;;IAED;IACA,MAAMC,SAAS,GAAGA,CAAA,KAAM;MACtBtB,MAAM,CAACmB,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}