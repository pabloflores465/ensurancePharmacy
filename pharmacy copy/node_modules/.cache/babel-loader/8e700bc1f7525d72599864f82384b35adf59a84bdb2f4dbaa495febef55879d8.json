{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\n\n// Aseg煤rate de tener definida la variable de entorno (p. ej., VUE_APP_IP)\n\nexport default {\n  __name: 'Login',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const ip = process.env.VUE_APP_IP;\n    console.log(\"IP del servidor: \" + ip);\n    const router = useRouter();\n\n    // Variables reactivas para los campos del formulario\n    const role = ref('user');\n    const identifier = ref('');\n    const adminUsername = ref('');\n    const adminPassword = ref('');\n    const errorMessage = ref('');\n\n    // Funci贸n de login que valida las credenciales llamando a la API\n    const login = async () => {\n      errorMessage.value = '';\n\n      // Objeto payload que se enviar谩 a la API\n      let payload = {};\n      if (role.value === 'user' || role.value === 'employee') {\n        if (identifier.value.trim() === '' || adminPassword.value.trim() === '') {\n          errorMessage.value = \"El n煤mero de usuario/empleado y la contrase帽a son obligatorios.\";\n          return;\n        }\n        payload.email = identifier.value;\n        payload.password = adminPassword.value;\n      } else if (role.value === 'admin') {\n        if (adminUsername.value.trim() === '' || adminPassword.value.trim() === '') {\n          errorMessage.value = \"Usuario y contrase帽a son obligatorios.\";\n          return;\n        }\n        payload.email = adminUsername.value;\n        payload.password = adminPassword.value;\n      }\n      try {\n        // Llamada POST al endpoint /api2/login\n        const response = await axios.post(`http://${ip}:8081/api2/login`, payload);\n        console.log(\"Login exitoso:\", response.data);\n        // Si la respuesta es exitosa, redirige al inicio o a la ruta deseada\n        router.push('/');\n      } catch (error) {\n        console.error(\"Error en el login:\", error);\n        errorMessage.value = 'Credenciales incorrectas o error en el servidor.';\n      }\n    };\n    const __returned__ = {\n      ip,\n      router,\n      role,\n      identifier,\n      adminUsername,\n      adminPassword,\n      errorMessage,\n      login,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRouter","axios","ip","process","env","VUE_APP_IP","console","log","router","role","identifier","adminUsername","adminPassword","errorMessage","login","value","payload","trim","email","password","response","post","data","push","error"],"sources":["/Users/nohelestradap/Documents/VsCode/ensurancePharmacy/pharmacy/src/pages/Login.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"login-container\">\n    <!-- Secci贸n izquierda con imagen de fondo -->\n    <div class=\"login-image\"></div>\n\n    <!-- Secci贸n derecha con formulario -->\n    <div class=\"login-box\">\n      <div class=\"logo-container\">\n        <img src=\"@/assets/logo.png\" alt=\"Farmacia Logo\" class=\"logo\" />\n      </div>\n\n      <h2 class=\"text-2xl font-bold text-center text-blue-800 mb-4\">Iniciar Sesi贸n</h2>\n\n      <!-- Selector de tipo de usuario -->\n     \n\n      <!-- Formulario de inicio de sesi贸n -->\n      <form @submit.prevent=\"login\">\n        <!-- Para usuarios y empleados -->\n        <div v-if=\"role === 'user' || role === 'employee'\" class=\"mb-4\">\n          <label class=\"block text-gray-700\">\n            {{ role === 'user' ? \"N煤mero de Usuario\" : \"N煤mero de Empleado\" }}\n          </label>\n          <div class=\"input-group\">\n            <input v-model=\"identifier\" type=\"text\" class=\"input-field\" required />\n            <span class=\"icon\"></span>\n          </div>\n          <div class=\"mb-4\">\n            <label class=\"block text-gray-700\">Contrase帽a</label>\n            <div class=\"input-group\">\n              <input v-model=\"adminPassword\" type=\"password\" class=\"input-field\" required />\n              <span class=\"icon\"></span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Para administradores -->\n        <div v-if=\"role === 'admin'\" class=\"mb-4\">\n          <label class=\"block text-gray-700\">Usuario Administrador</label>\n          <div class=\"input-group\">\n            <input v-model=\"adminUsername\" type=\"text\" class=\"input-field\" required />\n            <span class=\"icon\"></span>\n          </div>\n          <div class=\"mb-4\">\n            <label class=\"block text-gray-700\">Contrase帽a</label>\n            <div class=\"input-group\">\n              <input v-model=\"adminPassword\" type=\"password\" class=\"input-field\" required />\n              <span class=\"icon\"></span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Mensaje de error -->\n        <div v-if=\"errorMessage\" class=\"mb-4 text-red-600 text-center\">\n          {{ errorMessage }}\n        </div>\n\n        <!-- Bot贸n de inicio de sesi贸n -->\n        <button type=\"submit\" class=\"login-button\">\n          Iniciar sesi贸n \n        </button>\n      </form>\n      <!-- Enlace para registrarse -->\n      <div class=\"text-center mt-4\">\n        <router-link to=\"/register\" class=\"text-blue-500 hover:underline\">Reg铆strarse aqu铆</router-link>\n      </div>\n      \n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\n\n// Aseg煤rate de tener definida la variable de entorno (p. ej., VUE_APP_IP)\nconst ip = process.env.VUE_APP_IP;\nconsole.log(\"IP del servidor: \" + ip);\n\nconst router = useRouter();\n\n// Variables reactivas para los campos del formulario\nconst role = ref('user'); \nconst identifier = ref('');\nconst adminUsername = ref('');\nconst adminPassword = ref('');\nconst errorMessage = ref('');\n\n// Funci贸n de login que valida las credenciales llamando a la API\nconst login = async () => {\n  errorMessage.value = '';\n\n  // Objeto payload que se enviar谩 a la API\n  let payload = {};\n\n  if (role.value === 'user' || role.value === 'employee') {\n    if (identifier.value.trim() === '' || adminPassword.value.trim() === '') {\n      errorMessage.value = \"El n煤mero de usuario/empleado y la contrase帽a son obligatorios.\";\n      return;\n    }\n    payload.email = identifier.value;\n    payload.password = adminPassword.value;\n  } else if (role.value === 'admin') {\n    if (adminUsername.value.trim() === '' || adminPassword.value.trim() === '') {\n      errorMessage.value = \"Usuario y contrase帽a son obligatorios.\";\n      return;\n    }\n    payload.email = adminUsername.value;\n    payload.password = adminPassword.value;\n  }\n\n  try {\n    // Llamada POST al endpoint /api2/login\n    const response = await axios.post(`http://${ip}:8081/api2/login`, payload);\n    console.log(\"Login exitoso:\", response.data);\n    // Si la respuesta es exitosa, redirige al inicio o a la ruta deseada\n    router.push('/');\n  } catch (error) {\n    console.error(\"Error en el login:\", error);\n    errorMessage.value = 'Credenciales incorrectas o error en el servidor.';\n  }\n};\n</script>\n\n<style scoped>\n/* Dise帽o de dos columnas */\n.login-container {\n  display: flex;\n  height: 100vh;\n  background-color: #f8f9fa;\n}\n\n/* Secci贸n izquierda con imagen de fondo */\n.login-image {\n  flex: 1;\n  background-image: url(@/assets/farmacialog.jpg);\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* Secci贸n derecha (Formulario) */\n.login-box {\n  flex: 1;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 50px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);\n  border-radius: 15px;\n}\n\n/* Logo */\n.logo-container {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n}\n.logo {\n  max-width: 150px;\n}\n\n/* Inputs estilizados */\n.input-group {\n  position: relative;\n  width: 100%;\n}\n.input-field {\n  width: 100%;\n  padding: 12px 40px 12px 12px;\n  border: 1px solid #ccc;\n  border-radius: 8px;\n  font-size: 16px;\n}\n.icon {\n  position: absolute;\n  right: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n/* Bot贸n estilizado */\n.login-button {\n  width: 100%;\n  background: #1e40af;\n  color: white;\n  padding: 12px;\n  border-radius: 8px;\n  font-size: 18px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: 0.3s;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.login-button:hover {\n  background: #1e3a8a;\n}\n\n/* Responsivo */\n@media (max-width: 768px) {\n  .login-container {\n    flex-direction: column;\n  }\n  .login-image {\n    display: none; /* Ocultar imagen en pantallas peque帽as */\n  }\n}\n</style>"],"mappings":";AAyEA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAOC,KAAK,MAAM,OAAO;;AAEzB;;;;;;;;IACA,MAAMC,EAAE,GAAGC,OAAO,CAACC,GAAG,CAACC,UAAU;IACjCC,OAAO,CAACC,GAAG,CAAC,mBAAmB,GAAGL,EAAE,CAAC;IAErC,MAAMM,MAAM,GAAGR,SAAS,CAAC,CAAC;;IAE1B;IACA,MAAMS,IAAI,GAAGV,GAAG,CAAC,MAAM,CAAC;IACxB,MAAMW,UAAU,GAAGX,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMY,aAAa,GAAGZ,GAAG,CAAC,EAAE,CAAC;IAC7B,MAAMa,aAAa,GAAGb,GAAG,CAAC,EAAE,CAAC;IAC7B,MAAMc,YAAY,GAAGd,GAAG,CAAC,EAAE,CAAC;;IAE5B;IACA,MAAMe,KAAK,GAAG,MAAAA,CAAA,KAAY;MACxBD,YAAY,CAACE,KAAK,GAAG,EAAE;;MAEvB;MACA,IAAIC,OAAO,GAAG,CAAC,CAAC;MAEhB,IAAIP,IAAI,CAACM,KAAK,KAAK,MAAM,IAAIN,IAAI,CAACM,KAAK,KAAK,UAAU,EAAE;QACtD,IAAIL,UAAU,CAACK,KAAK,CAACE,IAAI,CAAC,CAAC,KAAK,EAAE,IAAIL,aAAa,CAACG,KAAK,CAACE,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;UACvEJ,YAAY,CAACE,KAAK,GAAG,iEAAiE;UACtF;QACF;QACAC,OAAO,CAACE,KAAK,GAAGR,UAAU,CAACK,KAAK;QAChCC,OAAO,CAACG,QAAQ,GAAGP,aAAa,CAACG,KAAK;MACxC,CAAC,MAAM,IAAIN,IAAI,CAACM,KAAK,KAAK,OAAO,EAAE;QACjC,IAAIJ,aAAa,CAACI,KAAK,CAACE,IAAI,CAAC,CAAC,KAAK,EAAE,IAAIL,aAAa,CAACG,KAAK,CAACE,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;UAC1EJ,YAAY,CAACE,KAAK,GAAG,wCAAwC;UAC7D;QACF;QACAC,OAAO,CAACE,KAAK,GAAGP,aAAa,CAACI,KAAK;QACnCC,OAAO,CAACG,QAAQ,GAAGP,aAAa,CAACG,KAAK;MACxC;MAEA,IAAI;QACF;QACA,MAAMK,QAAQ,GAAG,MAAMnB,KAAK,CAACoB,IAAI,CAAC,UAAUnB,EAAE,kBAAkB,EAAEc,OAAO,CAAC;QAC1EV,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEa,QAAQ,CAACE,IAAI,CAAC;QAC5C;QACAd,MAAM,CAACe,IAAI,CAAC,GAAG,CAAC;MAClB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdlB,OAAO,CAACkB,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;QAC1CX,YAAY,CAACE,KAAK,GAAG,kDAAkD;MACzE;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}