{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport { ref, computed, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useUserStore } from \"@/stores/userStore\";\nimport CartMini from \"@/components/CartMini.vue\";\nimport axios from \"axios\";\nexport default {\n  __name: 'Header',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const mobileMenuOpen = ref(false);\n    const toggleMenu = () => mobileMenuOpen.value = !mobileMenuOpen.value;\n    const userStore = useUserStore();\n    const router = useRouter();\n    const isLoggedIn = computed(() => Object.keys(userStore.getUser()).length !== 0);\n    const logout = () => {\n      userStore.logout();\n      localStorage.removeItem(\"session\");\n      router.push(\"/\");\n      setTimeout(() => window.location.reload(), 100);\n    };\n    const showCartMini = ref(false);\n    const cartItems = ref([]);\n    const ip = process.env.VUE_APP_API_IP || \"localhost\";\n    const toggleCartMini = () => showCartMini.value = !showCartMini.value;\n    onMounted(async () => {\n      if (isLoggedIn.value) {\n        try {\n          const orders = (await axios.get(`http://${ip}:8081/api2/orders`)).data;\n          const userId = userStore.getUser().idUser;\n          const currentOrder = orders.find(o => o.user.idUser === userId && o.status === \"En progreso\");\n          if (currentOrder) {\n            const allItems = (await axios.get(`http://${ip}:8081/api2/order_medicines`)).data;\n            cartItems.value = allItems.filter(item => item.orders.idOrder === currentOrder.idOrder);\n          }\n        } catch (error) {\n          console.error(\"Error fetching cart items in header:\", error);\n        }\n      }\n    });\n    const __returned__ = {\n      mobileMenuOpen,\n      toggleMenu,\n      userStore,\n      router,\n      isLoggedIn,\n      logout,\n      showCartMini,\n      cartItems,\n      ip,\n      toggleCartMini,\n      ref,\n      computed,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get useUserStore() {\n        return useUserStore;\n      },\n      CartMini,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useRouter","useUserStore","CartMini","axios","mobileMenuOpen","toggleMenu","value","userStore","router","isLoggedIn","Object","keys","getUser","length","logout","localStorage","removeItem","push","setTimeout","window","location","reload","showCartMini","cartItems","ip","process","env","VUE_APP_API_IP","toggleCartMini","orders","get","data","userId","idUser","currentOrder","find","o","user","status","allItems","filter","item","idOrder","error","console"],"sources":["/Users/nohelestradap/Documents/VsCode/ensurancePharmacy/pharmacy/src/components/Header.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <header class=\"navbar\">\n    <div class=\"navbar-content\">\n      <!-- Logo -->\n      <img src=\"@/assets/logo.png\" alt=\"Logo\" class=\"logo\" />\n\n      <!-- MenÃº de NavegaciÃ³n (desktop) -->\n      <nav class=\"nav-links hidden md:flex\">\n        <router-link to=\"/\" class=\"nav-item\">Inicio</router-link>\n        <router-link to=\"/ofertas\" class=\"nav-item\">Ofertas</router-link>\n        <router-link to=\"/catalogo\" class=\"nav-item\">CatÃ¡logo de Productos</router-link>\n        <router-link to=\"/receta\" class=\"nav-item\">Receta</router-link>\n        <router-link to=\"/contact\" class=\"nav-item\">Contacto</router-link>\n        <router-link\n            v-if=\"isLoggedIn && userStore.getUser().role === 'admin'\"\n            to=\"/admin\"\n            class=\"nav-item\"\n        >\n          Agregar Productos\n        </router-link>\n        <router-link\n            v-if=\"isLoggedIn && userStore.getUser().role === 'admin'\"\n            to=\"/create-product\"\n            class=\"nav-item\"\n        >\n          Crear Producto\n        </router-link>\n        <router-link to=\"/prescriptions\" class=\"nav-item\">Ver Recetas</router-link>\n\n        <template v-if=\"isLoggedIn\">\n          <span class=\"logged-user-message\">Rol: {{ userStore.getUser().role }}</span>\n          <button @click=\"logout\" class=\"login-button\">Cerrar SesiÃ³n</button>\n        </template>\n        <template v-else>\n          <router-link to=\"/login\" class=\"login-button\">ðŸ”‘ Iniciar SesiÃ³n</router-link>\n        </template>\n      </nav>\n\n      <!-- BotÃ³n hamburguesa (mobile) -->\n      <button @click=\"toggleMenu\" class=\"menu-button md:hidden\">â˜°</button>\n      <!-- BotÃ³n carrito -->\n      <button @click=\"toggleCartMini\" class=\"cart-button ml-4\">ðŸ›’</button>\n      <CartMini\n          v-if=\"showCartMini\"\n          :cartItems=\"cartItems\"\n          @close=\"showCartMini = false\"\n          class=\"absolute right-4 top-full z-50\"\n      />\n    </div>\n\n    <!-- MenÃº desplegable (mobile) -->\n    <div v-if=\"mobileMenuOpen\" class=\"mobile-menu\">\n      <router-link to=\"/\" class=\"mobile-item\" @click=\"toggleMenu\">Inicio</router-link>\n      <router-link to=\"/ofertas\" class=\"mobile-item\" @click=\"toggleMenu\">Ofertas</router-link>\n      <router-link to=\"/catalogo\" class=\"mobile-item\" @click=\"toggleMenu\">CatÃ¡logo de Productos</router-link>\n      <router-link to=\"/receta\" class=\"mobile-item\" @click=\"toggleMenu\">Receta</router-link>\n      <router-link to=\"/contact\" class=\"mobile-item\" @click=\"toggleMenu\">Contacto</router-link>\n      <router-link\n          v-if=\"isLoggedIn && userStore.getUser().role === 'admin'\"\n          to=\"/admin\"\n          class=\"mobile-item\"\n          @click=\"toggleMenu\"\n      >\n        Agregar Productos\n      </router-link>\n      <template v-if=\"isLoggedIn\">\n        <span class=\"logged-user-message mobile-item\">Rol: {{ userStore.getUser().role }}</span>\n        <button @click=\"logout(); toggleMenu();\" class=\"mobile-login\">Cerrar SesiÃ³n</button>\n      </template>\n      <template v-else>\n        <router-link to=\"/login\" class=\"mobile-login\" @click=\"toggleMenu\">ðŸ”‘ Iniciar SesiÃ³n</router-link>\n      </template>\n    </div>\n  </header>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useUserStore } from \"@/stores/userStore\";\nimport CartMini from \"@/components/CartMini.vue\";\nimport axios from \"axios\";\n\nconst mobileMenuOpen = ref(false);\nconst toggleMenu = () => (mobileMenuOpen.value = !mobileMenuOpen.value);\n\nconst userStore = useUserStore();\nconst router = useRouter();\nconst isLoggedIn = computed(() => Object.keys(userStore.getUser()).length !== 0);\n\nconst logout = () => {\n  userStore.logout();\n  localStorage.removeItem(\"session\");\n  router.push(\"/\");\n  setTimeout(() => window.location.reload(), 100);\n};\n\nconst showCartMini = ref(false);\nconst cartItems = ref([]);\nconst ip = process.env.VUE_APP_API_IP || \"localhost\";\nconst toggleCartMini = () => (showCartMini.value = !showCartMini.value);\n\nonMounted(async () => {\n  if (isLoggedIn.value) {\n    try {\n      const orders = (await axios.get(`http://${ip}:8081/api2/orders`)).data;\n      const userId = userStore.getUser().idUser;\n      const currentOrder = orders.find(o => o.user.idUser === userId && o.status === \"En progreso\");\n      if (currentOrder) {\n        const allItems = (await axios.get(`http://${ip}:8081/api2/order_medicines`)).data;\n        cartItems.value = allItems.filter(item => item.orders.idOrder === currentOrder.idOrder);\n      }\n    } catch (error) {\n      console.error(\"Error fetching cart items in header:\", error);\n    }\n  }\n});\n</script>\n\n<style scoped>\n.navbar { background: #1e40af; padding: 15px 30px; display: flex; justify-content: center; }\n.navbar-content { width: 100%; max-width: 1200px; display: flex; justify-content: space-between; align-items: center; }\n.logo { height: 50px; }\n.nav-links { display: flex; gap: 20px; }\n.nav-item { color: white; font-weight: bold; text-decoration: none; }\n.login-button, .mobile-login { background: white; color: #1e40af; padding: 8px 15px; border-radius: 5px; font-weight: bold; }\n.menu-button { font-size: 24px; color: white; background: transparent; border: none; }\n.cart-button { background: none; border: none; font-size: 1.5rem; cursor: pointer; }\n.mobile-menu { background: #1e40af; position: absolute; top: 60px; left: 0; width: 100%; padding: 15px 0; }\n.mobile-item { color: white; font-size: 18px; padding: 10px; display: block; text-decoration: none; }\n</style>"],"mappings":";;;;AA8EA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAK;AAC9C,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,YAAY,QAAQ,oBAAoB;AACjD,OAAOC,QAAQ,MAAM,2BAA2B;AAChD,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,cAAc,GAAGP,GAAG,CAAC,KAAK,CAAC;IACjC,MAAMQ,UAAU,GAAGA,CAAA,KAAOD,cAAc,CAACE,KAAK,GAAG,CAACF,cAAc,CAACE,KAAM;IAEvE,MAAMC,SAAS,GAAGN,YAAY,CAAC,CAAC;IAChC,MAAMO,MAAM,GAAGR,SAAS,CAAC,CAAC;IAC1B,MAAMS,UAAU,GAAGX,QAAQ,CAAC,MAAMY,MAAM,CAACC,IAAI,CAACJ,SAAS,CAACK,OAAO,CAAC,CAAC,CAAC,CAACC,MAAM,KAAK,CAAC,CAAC;IAEhF,MAAMC,MAAM,GAAGA,CAAA,KAAM;MACnBP,SAAS,CAACO,MAAM,CAAC,CAAC;MAClBC,YAAY,CAACC,UAAU,CAAC,SAAS,CAAC;MAClCR,MAAM,CAACS,IAAI,CAAC,GAAG,CAAC;MAChBC,UAAU,CAAC,MAAMC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC;IACjD,CAAC;IAED,MAAMC,YAAY,GAAGzB,GAAG,CAAC,KAAK,CAAC;IAC/B,MAAM0B,SAAS,GAAG1B,GAAG,CAAC,EAAE,CAAC;IACzB,MAAM2B,EAAE,GAAGC,OAAO,CAACC,GAAG,CAACC,cAAc,IAAI,WAAW;IACpD,MAAMC,cAAc,GAAGA,CAAA,KAAON,YAAY,CAAChB,KAAK,GAAG,CAACgB,YAAY,CAAChB,KAAM;IAEvEP,SAAS,CAAC,YAAY;MACpB,IAAIU,UAAU,CAACH,KAAK,EAAE;QACpB,IAAI;UACF,MAAMuB,MAAM,GAAG,CAAC,MAAM1B,KAAK,CAAC2B,GAAG,CAAC,UAAUN,EAAE,mBAAmB,CAAC,EAAEO,IAAI;UACtE,MAAMC,MAAM,GAAGzB,SAAS,CAACK,OAAO,CAAC,CAAC,CAACqB,MAAM;UACzC,MAAMC,YAAY,GAAGL,MAAM,CAACM,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAACJ,MAAM,KAAKD,MAAM,IAAII,CAAC,CAACE,MAAM,KAAK,aAAa,CAAC;UAC7F,IAAIJ,YAAY,EAAE;YAChB,MAAMK,QAAQ,GAAG,CAAC,MAAMpC,KAAK,CAAC2B,GAAG,CAAC,UAAUN,EAAE,4BAA4B,CAAC,EAAEO,IAAI;YACjFR,SAAS,CAACjB,KAAK,GAAGiC,QAAQ,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACZ,MAAM,CAACa,OAAO,KAAKR,YAAY,CAACQ,OAAO,CAAC;UACzF;QACF,CAAC,CAAC,OAAOC,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,sCAAsC,EAAEA,KAAK,CAAC;QAC9D;MACF;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}