â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  K6 + PROMETHEUS - NOMBRES DE MÃ‰TRICAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CONFIGURACIÃ“N COMPLETA - Todo mediante Docker Compose

ğŸ“Š MÃ‰TRICAS HTTP
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ k6_http_reqs                  - Total de requests HTTP
â€¢ k6_http_req_duration          - DuraciÃ³n completa de requests (ms)
â€¢ k6_http_req_waiting           - Tiempo esperando respuesta (TTFB)
â€¢ k6_http_req_connecting        - Tiempo estableciendo conexiÃ³n TCP
â€¢ k6_http_req_tls_handshaking   - Tiempo en TLS handshake
â€¢ k6_http_req_sending           - Tiempo enviando datos
â€¢ k6_http_req_receiving         - Tiempo recibiendo datos
â€¢ k6_http_req_blocked           - Tiempo bloqueado antes del request
â€¢ k6_http_req_failed            - Ratio de requests fallidos

ğŸ“ˆ MÃ‰TRICAS DE VUs (USUARIOS VIRTUALES)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ k6_vus                        - NÃºmero actual de VUs activos
â€¢ k6_vus_max                    - NÃºmero mÃ¡ximo de VUs en el test

ğŸ”„ MÃ‰TRICAS DE ITERACIONES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ k6_iterations                 - Total de iteraciones completadas
â€¢ k6_iteration_duration         - DuraciÃ³n de cada iteraciÃ³n

ğŸ“¦ MÃ‰TRICAS DE DATOS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ k6_data_sent                  - Total de bytes enviados
â€¢ k6_data_received              - Total de bytes recibidos

âœ“ MÃ‰TRICAS DE CHECKS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ k6_checks                     - Ratio de checks exitosos

ğŸ¯ MÃ‰TRICAS PERSONALIZADAS (ejemplo en prometheus-test.js)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ k6_custom_test_counter        - Contador personalizado
â€¢ k6_custom_test_duration       - DuraciÃ³n personalizada
â€¢ k6_custom_test_success_rate   - Tasa de Ã©xito personalizada
â€¢ k6_custom_test_gauge          - Gauge personalizado

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ ESTADÃSTICAS DE MÃ‰TRICAS TREND (Histograms/Summary)

Las mÃ©tricas como k6_http_req_duration incluyen mÃºltiples estadÃ­sticas:
  â€¢ min       - Valor mÃ­nimo
  â€¢ max       - Valor mÃ¡ximo
  â€¢ avg       - Promedio
  â€¢ med       - Mediana (p50)
  â€¢ p95       - Percentil 95
  â€¢ p99       - Percentil 99

Ejemplo de uso:
  k6_http_req_duration{stat="p95"}
  k6_http_req_duration{stat="avg"}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” QUERIES PROMQL ÃšTILES

# Requests por segundo
rate(k6_http_reqs[1m])

# Latencia P95
k6_http_req_duration{stat="p95"}

# Latencia P99
k6_http_req_duration{stat="p99"}

# Tasa de errores
rate(k6_http_req_failed[1m])

# VUs activos
k6_vus

# Requests por mÃ©todo HTTP
sum by (method) (rate(k6_http_reqs[1m]))

# Requests por status code
sum by (status) (rate(k6_http_reqs[1m]))

# Throughput (bytes recibidos/seg)
rate(k6_data_received[1m])

# Latencia por endpoint
k6_http_req_duration{stat="p95"} by (name)

# Ver todas las mÃ©tricas de K6
{__name__=~"k6_.*"}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ INICIO RÃPIDO

# VerificaciÃ³n automatizada (TODO EN UNO)
cd stress/k6
./verify-prometheus-integration.sh

# Ver solo nombres de mÃ©tricas
./verify-prometheus-integration.sh --metrics-only

# Verificar mÃ©tricas existentes
./verify-prometheus-integration.sh --verify-only

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”§ CONFIGURACIÃ“N TÃ‰CNICA

Archivo: scripts/docker-compose.stress.yml
  â€¢ K6 con extensiÃ³n xk6-output-prometheus-remote
  â€¢ Remote Write a Prometheus cada 5 segundos
  â€¢ EstadÃ­sticas: p95, p99, min, max, avg, med
  â€¢ Conectado a monitoring-network

Archivo: scripts/docker-compose.monitor.yml
  â€¢ Prometheus con --web.enable-remote-write-receiver
  â€¢ Soporte para histogramas nativos
  â€¢ Puerto 9095 expuesto

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸŒ ACCESO

â€¢ Prometheus:    http://localhost:9095
  Query: {__name__=~"k6_.*"}

â€¢ Grafana:       http://localhost:3300
  Usuario: admin / Password: changeme

â€¢ K6 Dashboard:  http://localhost:5666

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“š DOCUMENTACIÃ“N COMPLETA

stress/k6/K6_PROMETHEUS_METRICS.md           - GuÃ­a completa de mÃ©tricas
K6_PROMETHEUS_SETUP_COMPLETE.md              - Setup detallado
stress/README.md                             - README actualizado
COMANDOS_RAPIDOS.md                          - Comandos actualizados

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… VERIFICACIÃ“N DE MÃ‰TRICAS

# Via curl
curl 'http://localhost:9095/api/v1/query?query=k6_http_reqs'
curl 'http://localhost:9095/api/v1/query?query=k6_vus'

# Via Prometheus UI
1. Abre http://localhost:9095
2. Query: {__name__=~"k6_.*"}
3. Verifica que aparezcan las mÃ©tricas listadas arriba

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Fecha: 2025-10-09 | Estado: âœ… COMPLETADO Y VERIFICADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
